var pe="pwdgen_theme",Me=["light","dark","system"];function Ne(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}function de(){try{let t=localStorage.getItem(pe);if(t&&Me.includes(t))return t}catch{}return null}function De(t){try{localStorage.setItem(pe,t)}catch{}}function Z(t){document.documentElement.setAttribute("data-theme",t);let e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",t==="light"?"#D14671":"#FF6B9D")}function ke(t){return t==="system"?Ne():t}function J(t){let e=document.getElementById("theme-toggle");if(e){let r=e.querySelector(".theme-toggle__icon");r&&(r.textContent=t==="light"?"\u2600\uFE0F":"\u{1F319}"),e.setAttribute("aria-label",`Switch to ${t==="light"?"dark":"light"} theme`)}}function ge(){let e=de()||"system",r=ke(e);Z(r),J(r),window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",s=>{if((de()||"system")==="system"){let i=s.matches?"light":"dark";Z(i),J(i)}});let n=document.getElementById("theme-toggle");n&&n.addEventListener("click",()=>{let a=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";Z(a),De(a),J(a)})}var X={MUST_BE_POSITIVE_INTEGER:t=>`The ${t} argument must be a positive integer`,EMPTY_CHARSET:"Character set must not be empty",INVALID_BYTE_LENGTH:"Byte length must be a positive integer"},m={TYPE_REQUIRED:"Password type is required",UNKNOWN_TYPE:(t,e=["strong","base64","memorable"])=>`Unknown password type: "${t}". Valid types: ${e.join(", ")}`,INVALID_ITERATION:"Iteration must be a positive integer",INVALID_LENGTH:"Length must be a positive integer",SEPARATOR_REQUIRED:"Separator is required"},v={MISSING_PORTS:(t,e)=>`Missing required ports: ${t.join(", ")}. Required ports: ${e.join(", ")}`,INVALID_PORT:(t,e)=>`${t}: Missing required methods for ${e}`,UNKNOWN_PORT_TYPE:(t,e)=>`${t}: Unknown port type ${e}`};var I=class{debug(e,r={}){throw new Error("LoggerPort.debug() must be implemented")}info(e,r={}){throw new Error("LoggerPort.info() must be implemented")}warn(e,r={}){throw new Error("LoggerPort.warn() must be implemented")}error(e,r=null){throw new Error("LoggerPort.error() must be implemented")}};var h=class extends I{debug(){}info(){}warn(){}error(){}};var y=class{async read(e){throw new Error("StoragePort.read() must be implemented")}async write(e,r){throw new Error("StoragePort.write() must be implemented")}async exists(e){throw new Error("StoragePort.exists() must be implemented")}async delete(e){throw new Error("StoragePort.delete() must be implemented")}};var E=class extends y{constructor(){super(),this.store=new Map}async read(e){return this.store.get(e)??null}async write(e,r){this.store.set(e,r)}async exists(e){return this.store.has(e)}async delete(e){return this.store.delete(e)}clear(){this.store.clear()}};var f=class{now(){throw new Error("ClockPort.now() must be implemented")}performanceNow(){throw new Error("ClockPort.performanceNow() must be implemented")}toISOString(){throw new Error("ClockPort.toISOString() must be implemented")}};var w=class extends f{constructor(e=Date.now()){super(),this.timestamp=e,this.performanceStart=0}now(){return this.timestamp}performanceNow(){return this.performanceStart}toISOString(){return new Date(this.timestamp).toISOString()}setTimestamp(e){this.timestamp=e}advance(e){this.timestamp+=e,this.performanceStart+=e}};var x=class{async loadDictionary(){throw new Error("DictionaryPort.loadDictionary() must be implemented")}async getWordCount(){throw new Error("DictionaryPort.getWordCount() must be implemented")}async selectRandomWord(e){throw new Error("DictionaryPort.selectRandomWord() must be implemented")}};var S=class extends x{constructor(e=[]){super(),this.words=e}async loadDictionary(){return this.words}async getWordCount(){return this.words.length}async selectRandomWord(e){if(this.words.length===0)throw new Error("Dictionary is empty");let r=await e(this.words.length);return this.words[r]}setWords(e){this.words=e}},A=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album"];var P=class{async generateRandomBytes(e){throw new Error("RandomGeneratorPort.generateRandomBytes() must be implemented")}async generateRandomInt(e){throw new Error("RandomGeneratorPort.generateRandomInt() must be implemented")}async generateRandomBase64(e){throw new Error("RandomGeneratorPort.generateRandomBase64() must be implemented")}async generateRandomString(e,r){throw new Error("RandomGeneratorPort.generateRandomString() must be implemented")}};var ee={randomGenerator:{portClass:"RandomGeneratorPort",required:!0,requiredMethods:["generateRandomBytes","generateRandomInt"]},logger:{portClass:"LoggerPort",required:!1,requiredMethods:["info","error"]},storage:{portClass:"StoragePort",required:!1,requiredMethods:["read","write"]},clock:{portClass:"ClockPort",required:!1,requiredMethods:["now","performanceNow"]},dictionary:{portClass:"DictionaryPort",required:!1,requiredMethods:["loadDictionary","getWordCount","selectRandomWord"]}},Ge=(t,e)=>e.every(r=>typeof t[r]=="function"),te=t=>{let e=[];if(!t||typeof t!="object")return{isValid:!1,errors:["Ports configuration must be an object"]};let r=Object.entries(ee).filter(([,s])=>s.required).map(([s])=>s),n=r.filter(s=>!t[s]);n.length>0&&e.push(v.MISSING_PORTS(n,r));for(let[s,a]of Object.entries(t)){let i=ee[s];if(i){if(!a){i.required&&e.push(`${s}: Port is required but not provided`);continue}Ge(a,i.requiredMethods)||e.push(v.INVALID_PORT(s,i.portClass))}}return{isValid:e.length===0,errors:e}};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",me="aeiou",he="bcdfhgjklmnpqrstvwxyz",Ue={BASE64:{charset:u,size:64,bitsPerCharacter:Math.log2(64),description:"Base64 character set (RFC 4648)"},VOWELS:{charset:me,size:5,bitsPerCharacter:Math.log2(5),description:"English vowels for syllable generation"},CONSONANTS:{charset:he,size:21,bitsPerCharacter:Math.log2(21),description:"English consonants for syllable generation"}};var c=(t,e)=>{if(!Number.isInteger(t)||t<1)throw new RangeError(X.MUST_BE_POSITIVE_INTEGER(e))};var ye=async(t,e)=>{c(t,"length");let r="";for(let n=0;n<t;n++){let s=await e.generateRandomInt(u.length);r+=u[s]}return r},B=async(t,e)=>{let{length:r,iteration:n,separator:s}=t;c(r,"length"),c(n,"iteration");let a=[];for(let i=0;i<n;i++){let l=await ye(r,e);a.push(l)}return a.join(s)},M=t=>{let{length:e,iteration:r}=t,n=Math.log2(u.length);return e*r*n};var Ee=async(t,e)=>{c(t,"length");let r="";for(let n=0;n<t;n++){let s=await e.generateRandomInt(u.length);r+=u[s]}return r},N=async(t,e)=>{let{length:r,iteration:n,separator:s}=t;c(r,"length"),c(n,"iteration");let a=[];for(let i=0;i<n;i++){let l=await Ee(r,e);a.push(l)}return a.join(s)},D=t=>{let{length:e,iteration:r}=t,n=Math.log2(u.length);return e*r*n};var k=async(t,e,r)=>{let{iteration:n,separator:s}=t;c(n,"iteration");let a=await r.loadDictionary();if(!a||a.length===0)throw new Error("Dictionary is empty or not loaded");let i=[];for(let l=0;l<n;l++){let g=await r.selectRandomWord(async T=>e.generateRandomInt(T));i.push(g)}return i.join(s)},G=t=>{let{iteration:e,dictionarySize:r=7776}=t,n=Math.log2(r);return e*n};var re=256,we=Math.log2(u.length),fe=Math.ceil(re/we),Se=async(t,e)=>{c(t,"length"),t<fe&&console.warn(`Warning: Quantum password length (${t}) is below recommended minimum (${fe} chars) for 256-bit entropy.`);let r="";for(let n=0;n<t;n++){let s=await e.generateRandomInt(u.length);r+=u[s]}return r},U=async(t,e)=>{let{length:r,iteration:n,separator:s}=t;c(r,"length"),c(n,"iteration");let a=O(t);a<re&&console.warn(`Warning: Total entropy (${a.toFixed(1)} bits) is below quantum-resistant target (${re} bits).`);let i=[];for(let l=0;l<n;l++){let g=await Se(r,e);i.push(g)}return i.join(s)},O=t=>{let{length:e,iteration:r}=t;return e*r*we};var d={STRONG:"strong",BASE64:"base64",MEMORABLE:"memorable",QUANTUM:"quantum-resistant"};var R=["strong","base64","memorable","quantum-resistant"],b=t=>R.includes(t),Re={[d.STRONG]:{name:"Strong Password",description:"Cryptographically secure base64-encoded random bytes",minLength:1,maxLength:1024,entropyPerUnit:6,unitType:"character",pattern:/^[A-Za-z0-9+/]+$/,useCases:["High-entropy passwords","API tokens","Secure credentials"]},[d.BASE64]:{name:"Base64 Password",description:"Uniform random selection from base64 character set",minLength:1,maxLength:1024,entropyPerUnit:6,unitType:"character",pattern:/^[A-Za-z0-9+/]+$/,useCases:["Fixed-length passwords","Avoid base64 padding"]},[d.MEMORABLE]:{name:"Memorable Password",description:"Passwords composed of dictionary words with separators",minLength:1,maxLength:20,entropyPerUnit:null,unitType:"word",pattern:null,useCases:["Passphrase generation","XKCD-style passwords","Human-memorable"]},[d.QUANTUM]:{name:"Quantum-Resistant Password",description:"Ultra-high entropy passwords designed for quantum-resistant security",minLength:32,maxLength:128,entropyPerUnit:6,unitType:"character",pattern:/^[A-Za-z0-9+/]+$/,useCases:["Post-quantum cryptography","Maximum security","Future-proof credentials"]}},V=(t,e)=>{let r=[];if(!b(t))return r.push(`Invalid password type: ${t}. Valid types: ${R.join(", ")}`),{isValid:!1,errors:r};let n=Re[t],{length:s,iteration:a}=e;return a!==void 0&&(!Number.isInteger(a)||a<1)&&r.push("Iteration must be a positive integer"),t!==d.MEMORABLE&&s!==void 0&&((!Number.isInteger(s)||s<n.minLength)&&r.push(`Length must be at least ${n.minLength}`),s>n.maxLength&&r.push(`Length must not exceed ${n.maxLength}`)),{isValid:r.length===0,errors:r}};var H={[d.STRONG]:{generate:B,calculateEntropy:M},[d.BASE64]:{generate:N,calculateEntropy:D},[d.MEMORABLE]:{generate:k,calculateEntropy:G},[d.QUANTUM]:{generate:U,calculateEntropy:O}},be=t=>{if(!b(t))throw new Error(m.UNKNOWN_TYPE(t));return H[t]},ne=async(t,e)=>{let{type:r}=t,n=be(r);if(r===d.MEMORABLE){if(!e.dictionary)throw new Error("DictionaryPort is required for memorable passwords");return n.generate(t,e.randomGenerator,e.dictionary)}return n.generate(t,e.randomGenerator)};var Te={BASE64_BITS_PER_CHAR:Math.log2(64),DICTIONARY_ENTRIES:null};var Pe=t=>t*Te.BASE64_BITS_PER_CHAR,_e=(t,e)=>{let r=Math.log2(t);return e*r};var oe=t=>t>=256?"EXCELLENT (256+ bits)":t>=128?"STRONG (128-255 bits)":t>=80?"GOOD (80-127 bits)":t>=64?"MODERATE (64-79 bits)":"WEAK (<64 bits)",se=t=>t>=128?"Excellent security. Suitable for high-security applications.":t>=80?"Good security for most applications. Consider increasing length for high-security needs.":"Consider increasing password length or iteration count for better security.",ae=t=>{let{type:e,length:r=16,iteration:n=1,dictionarySize:s=7776}=t;switch(e){case"strong":case"base64":case"quantum-resistant":return Pe(r)*n;case"memorable":return _e(s,n);default:return 0}};function ie(t={},e){let{validateOnInit:r=!0}=t,n={randomGenerator:e.randomGenerator,logger:e.logger??new h,storage:e.storage??new E,clock:e.clock??new w,dictionary:e.dictionary??new S(A)};if(r){let s=te(n);if(!s.isValid)throw new Error(`Port validation failed: ${s.errors.join("; ")}`)}return{async generate(s){let{type:a,length:i=16,iteration:l=1,separator:g="-"}=s;if(!a)throw new Error(m.TYPE_REQUIRED);if(!b(a))throw new Error(m.UNKNOWN_TYPE(a,R));let T=V(a,{length:i,iteration:l});if(!T.isValid)throw new Error(T.errors.join("; "));return ne({type:a,length:i,iteration:l,separator:g},n)},async generateMultiple(s){let a=[];for(let i of s){let l=await this.generate(i);a.push(l)}return a},calculateEntropy(s){let{type:a,length:i=16,iteration:l=1}=s,g=ae({type:a,length:i,iteration:l}),T=oe(g),ue=se(g);return{totalBits:g,securityLevel:T,recommendation:ue,perUnit:a==="memorable"?g/l:i*Math.log2(64)}},validateConfig(s){let{type:a}=s;return a?b(a)?V(a,s):{isValid:!1,errors:[m.UNKNOWN_TYPE(a,R)]}:{isValid:!1,errors:[m.TYPE_REQUIRED]}},getSupportedTypes(){return[...R]},getGenerator(s){return H[s]??null},getPorts(){return{...n}}}}var W=class extends P{async generateRandomBytes(e){if(!Number.isInteger(e)||e<1)throw new RangeError("byteLength must be a positive integer");if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("Web Crypto API is not available");let r=new Uint8Array(e);return crypto.getRandomValues(r),r}async generateRandomInt(e){if(!Number.isInteger(e)||e<1)throw new RangeError("max must be a positive integer");if(e===1)return 0;let r=Math.ceil(Math.log2(e+1)/8)||1,n=Math.floor(256**r/e)*e,s;do{let a=new Uint8Array(r);crypto.getRandomValues(a),s=a.reduce((i,l)=>i*256+l,0)}while(s>=n);return s%e}async generateRandomBase64(e){let r=await this.generateRandomBytes(e),n=Array.from(r).map(s=>String.fromCharCode(s)).join("");return btoa(n)}async generateRandomString(e,r){if(!Number.isInteger(e)||e<1)throw new RangeError("length must be a positive integer");if(!r||r.length===0)throw new RangeError("charset must not be empty");let n="";for(let s=0;s<e;s++){let a=await this.generateRandomInt(r.length);n+=r[a]}return n}};var $=class extends y{constructor(e={}){super(),this.prefix=e.prefix??"pwdgen_",e.sessionOnly?this.storage=typeof sessionStorage<"u"?sessionStorage:null:this.storage=typeof localStorage<"u"?localStorage:null}_key(e){return`${this.prefix}${e}`}_isAvailable(){if(!this.storage)return!1;try{let e="__storage_test__";return this.storage.setItem(e,e),this.storage.removeItem(e),!0}catch{return!1}}async read(e){if(!this._isAvailable())return null;try{return this.storage.getItem(this._key(e))}catch{return null}}async write(e,r){if(!this._isAvailable())throw new Error("Browser storage is not available");try{this.storage.setItem(this._key(e),r)}catch(n){throw n.name==="QuotaExceededError"?new Error("Storage quota exceeded"):n}}async exists(e){return this._isAvailable()?this.storage.getItem(this._key(e))!==null:!1}async delete(e){if(!this._isAvailable())return!1;let r=await this.exists(e);return this.storage.removeItem(this._key(e)),r}async clear(){if(!this._isAvailable())return;let e=[];for(let r=0;r<this.storage.length;r++){let n=this.storage.key(r);n&&n.startsWith(this.prefix)&&e.push(n)}for(let r of e)this.storage.removeItem(r)}};var q=class extends f{now(){return Date.now()}performanceNow(){return typeof performance<"u"&&performance.now?performance.now():Date.now()}toISOString(){return new Date().toISOString()}async measure(e){let r=this.performanceNow(),n=await e(),s=this.performanceNow()-r;return{result:n,elapsed:s}}async delay(e){return new Promise(r=>setTimeout(r,e))}};var _=class t{constructor(e={}){this.type=e.type??"",this.length=e.length??"",this.iteration=e.iteration??"",this.separator=e.separator??"-",this.preset=e.preset??null,this.copyToClipboard=e.copyToClipboard??!1,this.showPassword=e.showPassword??!0}static fromPreset(e,r){let n=r[e];if(!n)throw new Error(`Unknown preset: ${e}`);return new t({type:n.type,length:String(n.length),iteration:String(n.iteration),separator:n.separator,preset:e})}with(e){return new t({type:this.type,length:this.length,iteration:this.iteration,separator:this.separator,preset:this.preset,copyToClipboard:this.copyToClipboard,showPassword:this.showPassword,...e})}hasRequiredFields(){return this.type!==""&&this.iteration!==""}equals(e){return e instanceof t?this.type===e.type&&this.length===e.length&&this.iteration===e.iteration&&this.separator===e.separator&&this.preset===e.preset:!1}toJSON(){return{type:this.type,length:this.length,iteration:this.iteration,separator:this.separator,preset:this.preset,copyToClipboard:this.copyToClipboard,showPassword:this.showPassword}}};var Q=class{toConfig(e){let r={};if(e.type&&(r.type=e.type),r.type==="quantum-resistant")return r.length=43,r.iteration=1,r.separator="",r;if(e.length!==""&&e.length!==void 0){let n=parseInt(e.length,10);isNaN(n)||(r.length=n)}if(e.iteration!==""&&e.iteration!==void 0){let n=parseInt(e.iteration,10);isNaN(n)||(r.iteration=n)}return e.separator!==void 0&&(r.separator=e.separator),r}toFormState(e){return new _({type:e.type??"",length:e.length!==void 0?String(e.length):"",iteration:e.iteration!==void 0?String(e.iteration):"",separator:e.separator??"-"})}toUIOptions(e){return{copyToClipboard:e.copyToClipboard,showPassword:e.showPassword,preset:e.preset}}};var Y=class t{constructor(e){this.password=e.password,this.maskedPassword=this._maskPassword(e.password),this.length=e.password?.length??0,this.entropyBits=e.entropyInfo?.totalBits??0,this.securityLevel=e.entropyInfo?.securityLevel??"unknown",this.securityRecommendation=e.entropyInfo?.recommendation??"",this.strengthIndicator=this._mapToStrengthIndicator(e.entropyInfo),this.type=e.config?.type??"",this.configSummary=this._formatConfigSummary(e.config),this.generatedAt=new Date().toISOString()}_maskPassword(e){return e?e.length<=4?"*".repeat(e.length):e.slice(0,2)+"*".repeat(e.length-4)+e.slice(-2):""}_mapToStrengthIndicator(e){let r=e?.totalBits??0;return r>=128?{level:"maximum",label:"Maximum",dots:4,color:"success"}:r>=80?{level:"strong",label:"Strong",dots:3,color:"success"}:r>=64?{level:"medium",label:"Medium",dots:2,color:"warning"}:{level:"weak",label:"Weak",dots:1,color:"error"}}_formatConfigSummary(e){if(!e)return"";let r=[];return e.type&&r.push(`Type: ${e.type}`),e.length&&r.push(`Length: ${e.length}`),e.iteration&&r.push(`Iterations: ${e.iteration}`),e.separator&&r.push(`Separator: "${e.separator}"`),r.join(" | ")}static fromGenerationResult(e){return new t(e)}getDisplayPassword(e=!0){return e?this.password:this.maskedPassword}getStrengthDots(){let e=this.strengthIndicator.dots,r=4-e;return"\u25CF".repeat(e)+"\u25CB".repeat(r)}toJSON(){return{password:this.password,maskedPassword:this.maskedPassword,length:this.length,entropyBits:this.entropyBits,securityLevel:this.securityLevel,strengthIndicator:this.strengthIndicator,type:this.type,configSummary:this.configSummary,generatedAt:this.generatedAt}}};var F=class t{constructor(e){this.isValid=e.isValid,this.errors=e.errors,this.fieldErrors=e.fieldErrors,this.hasTypeError=e.fieldErrors.type!==null,this.hasLengthError=e.fieldErrors.length!==null,this.hasIterationError=e.fieldErrors.iteration!==null,this.hasSeparatorError=e.fieldErrors.separator!==null,this.hasErrors=!e.isValid}static fromValidationResult(e,r=null){let n={type:null,length:null,iteration:null,separator:null};for(let s of e.errors){let a=s.toLowerCase();a.includes("type")?n.type=s:a.includes("length")?n.length=s:a.includes("iteration")?n.iteration=s:a.includes("separator")&&(n.separator=s)}return new t({isValid:e.isValid,errors:e.errors,fieldErrors:n})}static valid(){return new t({isValid:!0,errors:[],fieldErrors:{type:null,length:null,iteration:null,separator:null}})}getFieldError(e){return this.fieldErrors[e]??null}hasFieldError(e){return e in this.fieldErrors&&this.fieldErrors[e]!==null}getErrorFields(){return Object.entries(this.fieldErrors).filter(([,e])=>e!==null).map(([e])=>e)}getFirstError(){return this.errors.length>0?this.errors[0]:null}toJSON(){return{isValid:this.isValid,errors:this.errors,fieldErrors:this.fieldErrors}}};var K=class t{constructor(e){this.totalBits=e.totalBits??0,this.perUnit=e.perUnit??0,this.securityLevel=e.securityLevel??"unknown",this.recommendation=e.recommendation??"",this.displayBits=Math.round(this.totalBits),this.strengthPercentage=this._calculatePercentage(this.totalBits),this.strengthLabel=this._getStrengthLabel(this.totalBits),this.strengthColor=this._getStrengthColor(this.totalBits),this.progressBarWidth=`${this.strengthPercentage}%`}_calculatePercentage(e){return Math.min(100,Math.round(e/256*100))}_getStrengthLabel(e){return e>=256?"Excellent":e>=128?"Strong":e>=80?"Good":e>=64?"Moderate":e>=40?"Weak":"Very Weak"}_getStrengthColor(e){return e>=128?"green":e>=80?"blue":e>=64?"yellow":e>=40?"orange":"red"}static fromEntropyInfo(e){return new t(e)}getDisplayString(){return`${this.displayBits}-bit \xB7 ${this.strengthLabel}`}getAriaLabel(){return`Password strength: ${this.strengthLabel} with ${this.displayBits} bits of entropy`}toJSON(){return{totalBits:this.totalBits,displayBits:this.displayBits,securityLevel:this.securityLevel,strengthLabel:this.strengthLabel,strengthColor:this.strengthColor,strengthPercentage:this.strengthPercentage,recommendation:this.recommendation}}};var le=class{constructor(e={}){this.service=ie({},{randomGenerator:e.randomGenerator??new W,storage:e.storage??new $,clock:e.clock??new q}),this.stateToCoreMapper=new Q}validate(e){let r=this.stateToCoreMapper.toConfig(e),n=this.service.validateConfig(r);return F.fromValidationResult(n,e)}async generate(e){let r=this.validate(e);if(!r.isValid)throw new Error(r.errors.join("; "));let n=this.stateToCoreMapper.toConfig(e),s=await this.service.generate(n),a=this.service.calculateEntropy(n);return Y.fromGenerationResult({password:s,entropyInfo:a,config:n})}calculateEntropy(e){let r=this.stateToCoreMapper.toConfig(e),n=this.service.calculateEntropy(r);return K.fromEntropyInfo(n)}getSupportedTypes(){return this.service.getSupportedTypes()}getService(){return this.service}getMapper(){return this.stateToCoreMapper}};function Ie(t={}){return new le(t)}var We={quick:{type:"strong",length:14,iteration:4,separator:"-"},secure:{type:"strong",length:16,iteration:4,separator:""},memorable:{type:"memorable",length:4,iteration:4,separator:"-"},"quantum-resistant":{type:"quantum-resistant",length:43,iteration:1,separator:""}},Ce,p=null,C=!0,o={form:null,typeInputs:null,lengthInput:null,lengthGroup:null,iterationInput:null,iterationLabel:null,separatorInput:null,generateBtn:null,generateText:null,generateLoading:null,passwordValue:null,passwordActions:null,strengthIndicator:null,strengthLabel:null,strengthBits:null,strengthDescription:null,copyBtn:null,toggleVisibilityBtn:null,visibilityText:null,regenerateBtn:null,presetBtns:null,toast:null,srAnnouncements:null};function $e(){o.form=document.getElementById("password-form"),o.typeInputs=document.querySelectorAll('input[name="type"]'),o.lengthInput=document.getElementById("length"),o.lengthGroup=document.getElementById("length-group"),o.iterationInput=document.getElementById("iteration"),o.iterationLabel=document.getElementById("iteration-label"),o.separatorInput=document.getElementById("separator"),o.generateBtn=document.getElementById("generate-btn"),o.generateText=document.getElementById("generate-text"),o.generateLoading=document.getElementById("generate-loading"),o.passwordValue=document.getElementById("password-value"),o.passwordActions=document.getElementById("password-actions"),o.strengthIndicator=document.getElementById("strength-indicator"),o.strengthLabel=document.getElementById("strength-label"),o.strengthBits=document.getElementById("strength-bits"),o.strengthDescription=document.getElementById("strength-description"),o.copyBtn=document.getElementById("copy-btn"),o.toggleVisibilityBtn=document.getElementById("toggle-visibility-btn"),o.visibilityText=document.getElementById("visibility-text"),o.regenerateBtn=document.getElementById("regenerate-btn"),o.presetBtns=document.querySelectorAll(".preset-btn"),o.toast=document.getElementById("toast"),o.srAnnouncements=document.getElementById("sr-announcements")}function qe(){let t=document.querySelector('input[name="type"]:checked');return new _({type:t?.value||"strong",length:o.lengthInput.value,iteration:o.iterationInput.value,separator:o.separatorInput.value})}function Le(t){let e=t==="memorable",r=t==="quantum-resistant";o.lengthGroup.classList.toggle("hidden",e||r);let n=o.iterationInput.closest(".form-group--inline"),s=o.separatorInput.closest(".form-group--inline");n&&n.classList.toggle("hidden",r),s&&s.classList.toggle("hidden",r),o.iterationLabel.textContent=e?"Words":"Chunks";let a=document.getElementById("iteration-hint");a&&(a.textContent=e?"Number of words to generate":"Number of segments to generate")}function ve(t){let e=We[t];if(!e)return;let r=document.querySelector(`input[name="type"][value="${e.type}"]`);r&&(r.checked=!0),o.lengthInput.value=e.length,o.iterationInput.value=e.iteration,o.separatorInput.value=e.separator,Le(e.type),o.presetBtns.forEach(n=>{n.classList.toggle("preset-btn--active",n.dataset.preset===t)})}function j(t,e="success"){o.toast.textContent=t,o.toast.className=`toast toast--${e} toast--visible`,setTimeout(()=>{o.toast.classList.remove("toast--visible")},2500)}function xe(t){o.generateBtn.disabled=t,o.generateText.classList.toggle("hidden",t),o.generateLoading.classList.toggle("hidden",!t)}function Qe(t){o.passwordValue.innerHTML=`<span class="text-error">${ce(t)}</span>`,o.copyBtn.disabled=!0,o.toggleVisibilityBtn.disabled=!0,o.strengthIndicator.classList.add("hidden"),p=null}function ce(t){let e=document.createElement("div");return e.textContent=t,e.innerHTML}function Ye(t){p=t.password,C=!0,Be(),o.passwordActions.classList.remove("hidden"),o.copyBtn.disabled=!1,o.toggleVisibilityBtn.disabled=!1,Fe(t),L(`Password generated: ${t.strengthIndicator.label} strength with ${Math.round(t.entropyBits)} bits of entropy`)}function Be(){if(p)if(C)o.passwordValue.innerHTML=`<span class="select-all font-mono">${ce(p)}</span>`,o.visibilityText.textContent="Hide",o.toggleVisibilityBtn.setAttribute("aria-pressed","true"),o.toggleVisibilityBtn.setAttribute("aria-label","Hide password (currently visible)");else{let t=p.slice(0,3)+"\u2022".repeat(Math.max(0,p.length-6))+p.slice(-3);o.passwordValue.innerHTML=`<span class="font-mono">${ce(t)}</span>`,o.visibilityText.textContent="Show",o.toggleVisibilityBtn.setAttribute("aria-pressed","false"),o.toggleVisibilityBtn.setAttribute("aria-label","Show password (currently hidden)")}}function Fe(t){let{strengthIndicator:e,entropyBits:r}=t,n=Math.round(r);o.strengthIndicator.classList.remove("hidden"),o.strengthIndicator.className=`strength strength--${e.level}`,o.strengthIndicator.setAttribute("aria-valuenow",e.dots),o.strengthIndicator.setAttribute("aria-valuetext",`${e.label} strength, ${n} bits of entropy`),o.strengthIndicator.querySelectorAll(".strength__dot").forEach((a,i)=>{a.classList.toggle("strength__dot--filled",i<e.dots)}),o.strengthLabel.textContent=`${e.label}`,o.strengthBits.textContent=`${n}-bit`,o.strengthDescription&&(o.strengthDescription.textContent=`Password strength: ${e.label} with ${n} bits of entropy`)}function L(t){if(o.srAnnouncements)o.srAnnouncements.textContent="",setTimeout(()=>{o.srAnnouncements.textContent=t},50);else{let e=document.createElement("div");e.setAttribute("role","status"),e.setAttribute("aria-live","assertive"),e.className="sr-only",e.textContent=t,document.body.appendChild(e),setTimeout(()=>e.remove(),1e3)}}async function Ae(){if(p)try{await navigator.clipboard.writeText(p),j("Copied to clipboard!","success"),L("Password copied to clipboard")}catch{let t=document.createElement("textarea");t.value=p,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy"),j("Copied to clipboard!","success"),L("Password copied to clipboard")}catch{j("Failed to copy. Please copy manually.","error"),L("Failed to copy password. Please copy manually.")}document.body.removeChild(t)}}async function z(){xe(!0);try{let t=qe(),e=await Ce.generate(t);Ye(e)}catch(t){Qe(t.message),j(t.message,"error")}finally{xe(!1)}}function Ke(){o.form.addEventListener("submit",async t=>{t.preventDefault(),await z()}),o.typeInputs.forEach(t=>{t.addEventListener("change",()=>{Le(t.value),o.presetBtns.forEach(e=>e.classList.remove("preset-btn--active"))})}),o.presetBtns.forEach(t=>{t.addEventListener("click",()=>{ve(t.dataset.preset)})}),o.copyBtn.addEventListener("click",Ae),o.toggleVisibilityBtn.addEventListener("click",()=>{C=!C,Be(),L(C?"Password is now visible":"Password is now hidden")}),o.regenerateBtn.addEventListener("click",z),document.addEventListener("keydown",t=>{if((t.ctrlKey||t.metaKey)&&t.key==="Enter"&&(t.preventDefault(),z()),(t.ctrlKey||t.metaKey)&&t.key==="c"&&p){let e=window.getSelection();e&&e.toString()===""&&(t.preventDefault(),Ae())}})}async function Oe(){ge(),$e(),Ce=Ie(),Ke(),ve("quick"),await z()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Oe):Oe();
//# sourceMappingURL=bundle.js.map
