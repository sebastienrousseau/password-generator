{
  "version": 3,
  "sources": ["../../src/ui/web/demo/scripts/theme.js", "../../packages/core/src/errors.js", "../../packages/core/src/ports/LoggerPort.js", "../../packages/core/src/ports/StoragePort.js", "../../packages/core/src/ports/ClockPort.js", "../../packages/core/src/ports/DictionaryPort.js", "../../packages/core/src/ports/RandomGeneratorPort.js", "../../packages/core/src/ports/index.js", "../../packages/core/src/domain/charset.js", "../../packages/core/src/domain/base64-generation.js", "../../packages/core/src/generators/strong.js", "../../packages/core/src/generators/base64.js", "../../packages/core/src/generators/memorable.js", "../../packages/core/src/generators/quantum.js", "../../packages/core/src/domain/password-types.js", "../../packages/core/src/generators/index.js", "../../packages/core/src/domain/entropy-calculator.js", "../../packages/core/src/service.js", "../../src/ui/web/adapters/BrowserCryptoRandom.js", "../../src/ui/web/adapters/BrowserStorage.js", "../../src/ui/web/adapters/BrowserClock.js", "../../src/ui/web/state/FormState.js", "../../src/ui/web/state/StateToCoreMapper.js", "../../src/ui/web/view-models/PasswordViewModel.js", "../../src/ui/web/view-models/ValidationViewModel.js", "../../src/ui/web/view-models/EntropyViewModel.js", "../../src/ui/web/controllers/WebUIController.js", "../../src/ui/web/demo/scripts/main.js"],
  "sourcesContent": ["// Copyright 2022-2026 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Theme Management - Light/Dark/System theme support\n */\n\nconst THEME_KEY = \"pwdgen_theme\";\nconst THEMES = [\"light\", \"dark\", \"system\"];\n\n/**\n * Gets the system preference for color scheme.\n * @returns {'light'|'dark'} The system preference.\n */\nfunction getSystemPreference() {\n  if (window.matchMedia && window.matchMedia(\"(prefers-color-scheme: light)\").matches) {\n    return \"light\";\n  }\n  return \"dark\";\n}\n\n/**\n * Gets the stored theme preference.\n * @returns {'light'|'dark'|'system'|null} The stored preference.\n */\nfunction getStoredTheme() {\n  try {\n    const stored = localStorage.getItem(THEME_KEY);\n    if (stored && THEMES.includes(stored)) {\n      return stored;\n    }\n  } catch {\n    // localStorage not available\n  }\n  return null;\n}\n\n/**\n * Stores the theme preference.\n * @param {'light'|'dark'|'system'} theme - The theme to store.\n */\nfunction storeTheme(theme) {\n  try {\n    localStorage.setItem(THEME_KEY, theme);\n  } catch {\n    // localStorage not available\n  }\n}\n\n/**\n * Applies a theme to the document.\n * @param {'light'|'dark'} theme - The theme to apply.\n */\nfunction applyTheme(theme) {\n  document.documentElement.setAttribute(\"data-theme\", theme);\n\n  // Update theme-color meta tag\n  const metaThemeColor = document.querySelector(\"meta[name=\\\"theme-color\\\"]\");\n  if (metaThemeColor) {\n    metaThemeColor.setAttribute(\"content\", theme === \"light\" ? \"#D14671\" : \"#FF6B9D\");\n  }\n}\n\n/**\n * Gets the resolved theme (accounting for 'system').\n * @param {'light'|'dark'|'system'} preference - The user preference.\n * @returns {'light'|'dark'} The resolved theme.\n */\nfunction resolveTheme(preference) {\n  if (preference === \"system\") {\n    return getSystemPreference();\n  }\n  return preference;\n}\n\n/**\n * Updates the theme toggle button icon.\n * @param {'light'|'dark'} theme - The current theme.\n */\nfunction updateToggleIcon(theme) {\n  const toggle = document.getElementById(\"theme-toggle\");\n  if (toggle) {\n    const icon = toggle.querySelector(\".theme-toggle__icon\");\n    if (icon) {\n      icon.textContent = theme === \"light\" ? \"\u2600\uFE0F\" : \"\uD83C\uDF19\";\n    }\n    toggle.setAttribute(\"aria-label\", `Switch to ${theme === \"light\" ? \"dark\" : \"light\"} theme`);\n  }\n}\n\n/**\n * Initializes theme management.\n */\nexport function initTheme() {\n  // Get initial preference\n  const stored = getStoredTheme();\n  const preference = stored || \"system\";\n  const resolved = resolveTheme(preference);\n\n  // Apply initial theme\n  applyTheme(resolved);\n  updateToggleIcon(resolved);\n\n  // Listen for system preference changes\n  if (window.matchMedia) {\n    window.matchMedia(\"(prefers-color-scheme: light)\").addEventListener(\"change\", (e) => {\n      const currentPref = getStoredTheme() || \"system\";\n      if (currentPref === \"system\") {\n        const newTheme = e.matches ? \"light\" : \"dark\";\n        applyTheme(newTheme);\n        updateToggleIcon(newTheme);\n      }\n    });\n  }\n\n  // Set up toggle button\n  const toggle = document.getElementById(\"theme-toggle\");\n  if (toggle) {\n    toggle.addEventListener(\"click\", () => {\n      const current = document.documentElement.getAttribute(\"data-theme\");\n      const next = current === \"light\" ? \"dark\" : \"light\";\n\n      applyTheme(next);\n      storeTheme(next);\n      updateToggleIcon(next);\n    });\n  }\n}\n\nexport { applyTheme, getSystemPreference, getStoredTheme };\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Core error message templates for password generation.\n * These are pure functions that return error message strings.\n *\n * @module errors\n */\n\n/**\n * Cryptographic operation error messages.\n */\nexport const CRYPTO_ERRORS = {\n  /**\n   * Error message for invalid positive integer parameters.\n   * @param {string} paramName - The name of the parameter that must be positive.\n   * @returns {string} The error message.\n   */\n  MUST_BE_POSITIVE_INTEGER: (paramName) => `The ${paramName} argument must be a positive integer`,\n\n  /**\n   * Error message for empty character set.\n   * @returns {string} The error message.\n   */\n  EMPTY_CHARSET: \"Character set must not be empty\",\n\n  /**\n   * Error message for invalid byte length.\n   * @returns {string} The error message.\n   */\n  INVALID_BYTE_LENGTH: \"Byte length must be a positive integer\",\n};\n\n/**\n * Password generation error messages.\n */\nexport const PASSWORD_ERRORS = {\n  /**\n   * Error message when password type is not provided.\n   */\n  TYPE_REQUIRED: \"Password type is required\",\n\n  /**\n   * Error message for unknown password type.\n   * @param {string} type - The invalid type that was provided.\n   * @param {string[]} validTypes - Array of valid password types.\n   * @returns {string} The error message.\n   */\n  UNKNOWN_TYPE: (type, validTypes = [\"strong\", \"base64\", \"memorable\"]) =>\n    `Unknown password type: \"${type}\". Valid types: ${validTypes.join(\", \")}`,\n\n  /**\n   * Error message for invalid iteration count.\n   * @returns {string} The error message.\n   */\n  INVALID_ITERATION: \"Iteration must be a positive integer\",\n  /** Error message for invalid length. */\n  INVALID_LENGTH: \"Length must be a positive integer\",\n  /** Error message for missing separator. */\n  SEPARATOR_REQUIRED: \"Separator is required\",\n};\n\n/**\n * Port validation error messages.\n */\nexport const PORT_ERRORS = {\n  /**\n   * Error message for missing required ports.\n   * @param {string[]} missingPorts - Array of missing port names.\n   * @param {string[]} requiredPorts - Array of required port names.\n   * @returns {string} The error message.\n   */\n  MISSING_PORTS: (missingPorts, requiredPorts) =>\n    `Missing required ports: ${missingPorts.join(\", \")}. Required ports: ${requiredPorts.join(\", \")}`,\n  /** Error message for invalid port implementation. */\n  INVALID_PORT: (portName, expectedClass) =>\n    `${portName}: Missing required methods for ${expectedClass}`,\n  /** Error message for unknown port type. */\n  UNKNOWN_PORT_TYPE: (portName, expectedClass) => `${portName}: Unknown port type ${expectedClass}`,\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Port interface for logging operations.\n *\n * This port abstracts logging functionality to enable different implementations\n * (console, file, remote logging, no-op for production, etc.).\n *\n * @interface LoggerPort\n */\nexport class LoggerPort {\n  /**\n   * Logs a debug message.\n   *\n   * @param {string} message - The message to log.\n   * @param {Object} [metadata] - Additional context.\n   * @abstract\n   */\n  debug(_message, _metadata = {}) {\n    throw new Error(\"LoggerPort.debug() must be implemented\");\n  }\n\n  /**\n   * Logs an informational message.\n   *\n   * @param {string} message - The message to log.\n   * @param {Object} [metadata] - Additional context.\n   * @abstract\n   */\n  info(_message, _metadata = {}) {\n    throw new Error(\"LoggerPort.info() must be implemented\");\n  }\n\n  /**\n   * Logs a warning message.\n   *\n   * @param {string} message - The message to log.\n   * @param {Object} [metadata] - Additional context.\n   * @abstract\n   */\n  warn(_message, _metadata = {}) {\n    throw new Error(\"LoggerPort.warn() must be implemented\");\n  }\n\n  /**\n   * Logs an error message.\n   *\n   * @param {string} message - The error message.\n   * @param {Error} [error] - The error object.\n   * @abstract\n   */\n  error(_message, _error = null) {\n    throw new Error(\"LoggerPort.error() must be implemented\");\n  }\n}\n\n/**\n * Required methods for LoggerPort implementations.\n */\nexport const LOGGER_REQUIRED_METHODS = [\"info\", \"error\"];\n\n/**\n * Optional methods for LoggerPort implementations.\n */\nexport const LOGGER_OPTIONAL_METHODS = [\"debug\", \"warn\"];\n\n/**\n * No-op logger implementation for when logging is disabled.\n */\nexport class NoOpLogger extends LoggerPort {\n  debug() {}\n  info() {}\n  warn() {}\n  error() {}\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Port interface for persistent storage operations.\n *\n * This port abstracts storage functionality to enable different implementations\n * (file system, localStorage, IndexedDB, memory, etc.).\n *\n * @interface StoragePort\n */\nexport class StoragePort {\n  /**\n   * Reads the contents of a file/key.\n   *\n   * @param {string} key - The storage key or file path.\n   * @returns {Promise<string|null>} The contents or null if not found.\n   * @abstract\n   */\n  async read(_key) {\n    throw new Error(\"StoragePort.read() must be implemented\");\n  }\n\n  /**\n   * Writes content to a file/key.\n   *\n   * @param {string} key - The storage key or file path.\n   * @param {string} content - The content to write.\n   * @returns {Promise<void>}\n   * @abstract\n   */\n  async write(_key, _content) {\n    throw new Error(\"StoragePort.write() must be implemented\");\n  }\n\n  /**\n   * Checks if a file/key exists.\n   *\n   * @param {string} key - The storage key or file path.\n   * @returns {Promise<boolean>} True if the key exists.\n   * @abstract\n   */\n  async exists(_key) {\n    throw new Error(\"StoragePort.exists() must be implemented\");\n  }\n\n  /**\n   * Deletes a file/key.\n   *\n   * @param {string} key - The storage key or file path.\n   * @returns {Promise<boolean>} True if the key was deleted.\n   * @abstract\n   */\n  async delete(_key) {\n    throw new Error(\"StoragePort.delete() must be implemented\");\n  }\n}\n\n/**\n * Required methods for StoragePort implementations.\n */\nexport const STORAGE_REQUIRED_METHODS = [\"read\", \"write\"];\n\n/**\n * Optional methods for StoragePort implementations.\n */\nexport const STORAGE_OPTIONAL_METHODS = [\"exists\", \"delete\"];\n\n/**\n * In-memory storage implementation for testing.\n */\nexport class MemoryStorage extends StoragePort {\n  constructor() {\n    super();\n    this.store = new Map();\n  }\n\n  async read(key) {\n    return this.store.get(key) ?? null;\n  }\n\n  async write(key, content) {\n    this.store.set(key, content);\n  }\n\n  async exists(key) {\n    return this.store.has(key);\n  }\n\n  async delete(key) {\n    return this.store.delete(key);\n  }\n\n  clear() {\n    this.store.clear();\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Port interface for time-related operations.\n *\n * This port abstracts time functionality to enable testing with fixed timestamps\n * and different time sources (system clock, NTP, mock, etc.).\n *\n * @interface ClockPort\n */\nexport class ClockPort {\n  /**\n   * Gets the current timestamp in milliseconds since Unix epoch.\n   *\n   * @returns {number} Unix timestamp in milliseconds.\n   * @abstract\n   */\n  now() {\n    throw new Error(\"ClockPort.now() must be implemented\");\n  }\n\n  /**\n   * Gets a high-resolution timestamp for performance measurement.\n   *\n   * @returns {number} High-resolution timestamp in milliseconds.\n   * @abstract\n   */\n  performanceNow() {\n    throw new Error(\"ClockPort.performanceNow() must be implemented\");\n  }\n\n  /**\n   * Gets the current date as an ISO 8601 string.\n   *\n   * @returns {string} ISO 8601 formatted date string.\n   * @abstract\n   */\n  toISOString() {\n    throw new Error(\"ClockPort.toISOString() must be implemented\");\n  }\n}\n\n/**\n * Required methods for ClockPort implementations.\n */\nexport const CLOCK_REQUIRED_METHODS = [\"now\", \"performanceNow\"];\n\n/**\n * Optional methods for ClockPort implementations.\n */\nexport const CLOCK_OPTIONAL_METHODS = [\"toISOString\"];\n\n/**\n * Fixed clock implementation for testing.\n */\nexport class FixedClock extends ClockPort {\n  constructor(timestamp = Date.now()) {\n    super();\n    this.timestamp = timestamp;\n    this.performanceStart = 0;\n  }\n\n  now() {\n    return this.timestamp;\n  }\n\n  performanceNow() {\n    return this.performanceStart;\n  }\n\n  toISOString() {\n    return new Date(this.timestamp).toISOString();\n  }\n\n  setTimestamp(timestamp) {\n    this.timestamp = timestamp;\n  }\n\n  advance(milliseconds) {\n    this.timestamp += milliseconds;\n    this.performanceStart += milliseconds;\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Port interface for dictionary/wordlist operations.\n *\n * This port abstracts dictionary loading and word selection to enable\n * different implementations (file system, bundled, HTTP, custom lists, etc.).\n *\n * @interface DictionaryPort\n */\nexport class DictionaryPort {\n  /**\n   * Loads the dictionary and returns the list of words.\n   *\n   * @returns {Promise<string[]>} Array of words from the dictionary.\n   * @abstract\n   */\n  async loadDictionary() {\n    throw new Error(\"DictionaryPort.loadDictionary() must be implemented\");\n  }\n\n  /**\n   * Gets the number of words in the dictionary.\n   *\n   * @returns {Promise<number>} The word count.\n   * @abstract\n   */\n  async getWordCount() {\n    throw new Error(\"DictionaryPort.getWordCount() must be implemented\");\n  }\n\n  /**\n   * Selects a random word from the dictionary using the provided random generator.\n   *\n   * @param {Function} randomIntFn - Function that returns a random integer in [0, max).\n   * @returns {Promise<string>} A randomly selected word.\n   * @abstract\n   */\n  async selectRandomWord(_randomIntFn) {\n    throw new Error(\"DictionaryPort.selectRandomWord() must be implemented\");\n  }\n}\n\n/**\n * Required methods for DictionaryPort implementations.\n */\nexport const DICTIONARY_REQUIRED_METHODS = [\"loadDictionary\", \"getWordCount\", \"selectRandomWord\"];\n\n/**\n * In-memory dictionary implementation for testing or bundled dictionaries.\n */\nexport class MemoryDictionary extends DictionaryPort {\n  constructor(words = []) {\n    super();\n    this.words = words;\n  }\n\n  async loadDictionary() {\n    return this.words;\n  }\n\n  async getWordCount() {\n    return this.words.length;\n  }\n\n  async selectRandomWord(randomIntFn) {\n    if (this.words.length === 0) {\n      throw new Error(\"Dictionary is empty\");\n    }\n    const index = await randomIntFn(this.words.length);\n    return this.words[index];\n  }\n\n  setWords(words) {\n    this.words = words;\n  }\n}\n\n/**\n * Default word list for memorable passwords (EFF large wordlist subset).\n * This is a small sample - real implementations should use the full EFF list.\n */\nexport const DEFAULT_WORD_LIST = [\n  \"abandon\",\n  \"ability\",\n  \"able\",\n  \"about\",\n  \"above\",\n  \"absent\",\n  \"absorb\",\n  \"abstract\",\n  \"absurd\",\n  \"abuse\",\n  \"access\",\n  \"accident\",\n  \"account\",\n  \"accuse\",\n  \"achieve\",\n  \"acid\",\n  \"acoustic\",\n  \"acquire\",\n  \"across\",\n  \"act\",\n  \"action\",\n  \"actor\",\n  \"actress\",\n  \"actual\",\n  \"adapt\",\n  \"add\",\n  \"addict\",\n  \"address\",\n  \"adjust\",\n  \"admit\",\n  \"adult\",\n  \"advance\",\n  \"advice\",\n  \"aerobic\",\n  \"affair\",\n  \"afford\",\n  \"afraid\",\n  \"again\",\n  \"age\",\n  \"agent\",\n  \"agree\",\n  \"ahead\",\n  \"aim\",\n  \"air\",\n  \"airport\",\n  \"aisle\",\n  \"alarm\",\n  \"album\",\n];\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Port interface for cryptographically secure random number generation.\n *\n * This port abstracts the underlying cryptographic random generation\n * to enable testability and allow different implementations (Node.js crypto,\n * Web Crypto API, mock generators, etc.).\n *\n * All implementations MUST provide cryptographically secure randomness\n * suitable for password generation.\n *\n * @interface RandomGeneratorPort\n */\nexport class RandomGeneratorPort {\n  /**\n   * Generates cryptographically secure random bytes.\n   *\n   * @param {number} byteLength - The number of random bytes to generate.\n   * @returns {Promise<Uint8Array>} A promise resolving to random bytes.\n   * @throws {RangeError} If byteLength is not a positive integer.\n   * @throws {Error} If random generation fails.\n   * @abstract\n   */\n  async generateRandomBytes(_byteLength) {\n    throw new Error(\"RandomGeneratorPort.generateRandomBytes() must be implemented\");\n  }\n\n  /**\n   * Generates a cryptographically secure random integer in the range [0, max).\n   *\n   * @param {number} max - The exclusive upper bound for the random integer.\n   * @returns {Promise<number>} A promise resolving to a random integer in [0, max).\n   * @throws {RangeError} If max is not a positive integer.\n   * @throws {Error} If random generation fails.\n   * @abstract\n   */\n  async generateRandomInt(_max) {\n    throw new Error(\"RandomGeneratorPort.generateRandomInt() must be implemented\");\n  }\n\n  /**\n   * Generates a random base64 string of the specified byte length.\n   *\n   * @param {number} byteLength - The number of random bytes to generate before encoding.\n   * @returns {Promise<string>} A promise resolving to a base64-encoded random string.\n   * @throws {RangeError} If byteLength is not a positive integer.\n   * @throws {Error} If random generation fails.\n   * @abstract\n   */\n  async generateRandomBase64(_byteLength) {\n    throw new Error(\"RandomGeneratorPort.generateRandomBase64() must be implemented\");\n  }\n\n  /**\n   * Generates a random string of the exact character length using uniform\n   * selection from the provided character set.\n   *\n   * @param {number} length - The desired character length of the output.\n   * @param {string} charset - The character set to sample from.\n   * @returns {Promise<string>} A promise resolving to a random string of exactly length characters.\n   * @throws {RangeError} If length is not a positive integer or charset is empty.\n   * @throws {Error} If random generation fails.\n   * @abstract\n   */\n  async generateRandomString(_length, _charset) {\n    throw new Error(\"RandomGeneratorPort.generateRandomString() must be implemented\");\n  }\n}\n\n/**\n * Required methods for RandomGeneratorPort implementations.\n */\nexport const RANDOM_GENERATOR_REQUIRED_METHODS = [\"generateRandomBytes\", \"generateRandomInt\"];\n\n/**\n * Optional methods for RandomGeneratorPort implementations.\n */\nexport const RANDOM_GENERATOR_OPTIONAL_METHODS = [\"generateRandomBase64\", \"generateRandomString\"];\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Port interfaces for the password generator core.\n *\n * Ports define the contracts for external dependencies using the\n * Ports and Adapters (Hexagonal Architecture) pattern.\n *\n * @module ports\n */\n\nimport { PORT_ERRORS } from \"../errors.js\";\n\n// Import default implementations for use in createPortsWithDefaults\nimport { NoOpLogger } from \"./LoggerPort.js\";\nimport { MemoryStorage } from \"./StoragePort.js\";\nimport { FixedClock } from \"./ClockPort.js\";\nimport { MemoryDictionary, DEFAULT_WORD_LIST } from \"./DictionaryPort.js\";\n\n// Port interfaces\nexport {\n  RandomGeneratorPort,\n  RANDOM_GENERATOR_REQUIRED_METHODS,\n  RANDOM_GENERATOR_OPTIONAL_METHODS,\n} from \"./RandomGeneratorPort.js\";\n\nexport {\n  LoggerPort,\n  LOGGER_REQUIRED_METHODS,\n  LOGGER_OPTIONAL_METHODS,\n  NoOpLogger,\n} from \"./LoggerPort.js\";\n\nexport {\n  StoragePort,\n  STORAGE_REQUIRED_METHODS,\n  STORAGE_OPTIONAL_METHODS,\n  MemoryStorage,\n} from \"./StoragePort.js\";\n\nexport {\n  ClockPort,\n  CLOCK_REQUIRED_METHODS,\n  CLOCK_OPTIONAL_METHODS,\n  FixedClock,\n} from \"./ClockPort.js\";\n\nexport {\n  DictionaryPort,\n  DICTIONARY_REQUIRED_METHODS,\n  MemoryDictionary,\n  DEFAULT_WORD_LIST,\n} from \"./DictionaryPort.js\";\n\n/**\n * Port configuration schema for dependency injection.\n */\nexport const PORT_SCHEMA = {\n  randomGenerator: {\n    portClass: \"RandomGeneratorPort\",\n    required: true,\n    requiredMethods: [\"generateRandomBytes\", \"generateRandomInt\"],\n  },\n  logger: {\n    portClass: \"LoggerPort\",\n    required: false,\n    requiredMethods: [\"info\", \"error\"],\n  },\n  storage: {\n    portClass: \"StoragePort\",\n    required: false,\n    requiredMethods: [\"read\", \"write\"],\n  },\n  clock: {\n    portClass: \"ClockPort\",\n    required: false,\n    requiredMethods: [\"now\", \"performanceNow\"],\n  },\n  dictionary: {\n    portClass: \"DictionaryPort\",\n    required: false,\n    requiredMethods: [\"loadDictionary\", \"getWordCount\", \"selectRandomWord\"],\n  },\n};\n\n/**\n * Validates that a port implementation has the required methods.\n *\n * @param {Object} port - The port implementation to validate.\n * @param {string[]} requiredMethods - Array of required method names.\n * @returns {boolean} True if all required methods are present.\n */\nconst hasRequiredMethods = (port, requiredMethods) => {\n  return requiredMethods.every((method) => typeof port[method] === \"function\");\n};\n\n/**\n * Validates a complete port configuration.\n *\n * @param {Object} ports - Object containing port implementations.\n * @param {Object} ports.randomGenerator - RandomGeneratorPort implementation (required).\n * @param {Object} [ports.logger] - LoggerPort implementation (optional).\n * @param {Object} [ports.storage] - StoragePort implementation (optional).\n * @param {Object} [ports.clock] - ClockPort implementation (optional).\n * @param {Object} [ports.dictionary] - DictionaryPort implementation (optional).\n * @returns {Object} Validation result with isValid and errors.\n */\nexport const validatePorts = (ports) => {\n  const errors = [];\n\n  if (!ports || typeof ports !== \"object\") {\n    return {\n      isValid: false,\n      errors: [\"Ports configuration must be an object\"],\n    };\n  }\n\n  // Check required ports\n  const requiredPorts = Object.entries(PORT_SCHEMA)\n    .filter(([, schema]) => schema.required)\n    .map(([name]) => name);\n\n  const missingPorts = requiredPorts.filter((name) => !ports[name]);\n  if (missingPorts.length > 0) {\n    errors.push(PORT_ERRORS.MISSING_PORTS(missingPorts, requiredPorts));\n  }\n\n  // Validate each provided port\n  for (const [portName, port] of Object.entries(ports)) {\n    const schema = PORT_SCHEMA[portName];\n\n    if (!schema) {\n      // Unknown port, skip validation but could warn\n      continue;\n    }\n\n    if (!port) {\n      if (schema.required) {\n        errors.push(`${portName}: Port is required but not provided`);\n      }\n      continue;\n    }\n\n    if (!hasRequiredMethods(port, schema.requiredMethods)) {\n      errors.push(PORT_ERRORS.INVALID_PORT(portName, schema.portClass));\n    }\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n  };\n};\n\n/**\n * Creates a ports configuration with defaults for optional ports.\n *\n * @param {Object} ports - Partial port configuration.\n * @returns {Object} Complete port configuration with defaults.\n */\nexport const createPortsWithDefaults = (ports) => {\n  return {\n    randomGenerator: ports.randomGenerator, // Required, no default\n    logger: ports.logger ?? new NoOpLogger(),\n    storage: ports.storage ?? new MemoryStorage(),\n    clock: ports.clock ?? new FixedClock(),\n    dictionary: ports.dictionary ?? new MemoryDictionary(DEFAULT_WORD_LIST),\n  };\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Pure domain logic for character sets used in password generation.\n * This module contains immutable character set definitions without dependencies.\n *\n * @module charset\n */\n\n/** Base64 character set (64 characters, no padding bias). */\nexport const BASE64_CHARSET = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n/** Vowel characters for syllable generation. */\nexport const VOWELS = \"aeiou\";\n\n/** Consonant characters for syllable generation. */\nexport const CONSONANTS = \"bcdfhgjklmnpqrstvwxyz\";\n\n/**\n * Character set metadata for entropy calculations and validation.\n */\nexport const CHARACTER_SET_METADATA = {\n  BASE64: {\n    charset: BASE64_CHARSET,\n    size: 64,\n    bitsPerCharacter: Math.log2(64), // 6 bits\n    description: \"Base64 character set (RFC 4648)\",\n  },\n  VOWELS: {\n    charset: VOWELS,\n    size: 5,\n    bitsPerCharacter: Math.log2(5), // ~2.32 bits\n    description: \"English vowels for syllable generation\",\n  },\n  CONSONANTS: {\n    charset: CONSONANTS,\n    size: 21,\n    bitsPerCharacter: Math.log2(21), // ~4.39 bits\n    description: \"English consonants for syllable generation\",\n  },\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Pure domain logic for base64 password generation.\n * This module contains validation and string manipulation logic without crypto dependencies.\n *\n * @module base64-generation\n */\n\nimport { CRYPTO_ERRORS } from \"../errors.js\";\n\n/**\n * Validates that a value is a positive integer, throwing a RangeError if not.\n *\n * @param {*} value The value to validate.\n * @param {string} name The parameter name for the error message.\n * @throws {RangeError} If value is not a positive integer.\n */\nexport const validatePositiveInteger = (value, name) => {\n  if (!Number.isInteger(value) || value < 1) {\n    throw new RangeError(CRYPTO_ERRORS.MUST_BE_POSITIVE_INTEGER(name));\n  }\n};\n\n/**\n * Validates base64 string format\n * @param {string} str - The string to validate\n * @returns {boolean} True if the string is valid base64\n */\nexport const isValidBase64 = (str) => {\n  if (typeof str !== \"string\") return false;\n\n  // Base64 pattern: alphanumeric + / + = for padding (max 2 = at end)\n  // This regex validates:\n  // - Only base64 characters (A-Za-z0-9+/)\n  // - Padding (=) only at the end\n  // - Maximum 2 padding characters\n  const base64Pattern = /^[A-Za-z0-9+/]*={0,2}$/;\n\n  return base64Pattern.test(str);\n};\n\n/**\n * Splits a string into substrings of the specified length.\n *\n * @param {string} str The string to split.\n * @param {number} length The length of each substring.\n * @return {Array<string>} The array of substrings.\n * @throws {RangeError} If length is not a positive integer.\n */\nexport const splitString = (str, length) => {\n  validatePositiveInteger(length, \"length\");\n  const substrings = str.match(new RegExp(`.{1,${length}}`, \"g\"));\n  return substrings || [];\n};\n\n/**\n * Calculates the expected base64 encoded length from byte length\n * @param {number} byteLength - Number of input bytes\n * @returns {number} Expected base64 string length (with padding)\n */\nexport const calculateBase64Length = (byteLength) => {\n  validatePositiveInteger(byteLength, \"byteLength\");\n\n  // Base64 encoding: 3 bytes -> 4 characters\n  // Padding is added to make the output length a multiple of 4\n  return Math.ceil(byteLength / 3) * 4;\n};\n\n/**\n * Calculates the byte length that would produce a base64 string of given length\n * @param {number} base64Length - Target base64 string length\n * @returns {number} Required byte length\n */\nexport const calculateRequiredByteLength = (base64Length) => {\n  validatePositiveInteger(base64Length, \"base64Length\");\n\n  // Base64 encoding: 4 characters -> 3 bytes\n  // Account for padding by taking the ceiling\n  return Math.ceil((base64Length * 3) / 4);\n};\n\n/**\n * Domain rules for base64 password generation\n */\nexport const BASE64_DOMAIN_RULES = {\n  MIN_BYTE_LENGTH: 1,\n  MAX_BYTE_LENGTH: 1024,\n  MIN_CHUNK_LENGTH: 1,\n  MAX_CHUNK_LENGTH: 1024,\n  CHARSET_SIZE: 64,\n  BITS_PER_CHARACTER: 6,\n  BYTES_PER_CHUNK: 3,\n  CHARS_PER_CHUNK: 4,\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Pure generator for strong (base64) passwords.\n * All randomness is provided through the injected random generator port.\n *\n * @module generators/strong\n */\n\nimport { BASE64_CHARSET } from \"../domain/charset.js\";\nimport { validatePositiveInteger } from \"../domain/base64-generation.js\";\n\n/**\n * Generates a single chunk of a strong password using uniform character selection.\n *\n * @param {number} length - The number of characters to generate.\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @returns {Promise<string>} A random string of the specified length.\n */\nexport const generateChunk = async (length, randomGenerator) => {\n  validatePositiveInteger(length, \"length\");\n\n  let result = \"\";\n  for (let i = 0; i < length; i++) {\n    const index = await randomGenerator.generateRandomInt(BASE64_CHARSET.length);\n    result += BASE64_CHARSET[index];\n  }\n  return result;\n};\n\n/**\n * Generates a strong password with multiple chunks separated by a delimiter.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.length - Length of each chunk.\n * @param {number} config.iteration - Number of chunks.\n * @param {string} config.separator - Separator between chunks.\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @returns {Promise<string>} The generated password.\n */\nexport const generateStrongPassword = async (config, randomGenerator) => {\n  const { length, iteration, separator } = config;\n\n  validatePositiveInteger(length, \"length\");\n  validatePositiveInteger(iteration, \"iteration\");\n\n  const chunks = [];\n  for (let i = 0; i < iteration; i++) {\n    const chunk = await generateChunk(length, randomGenerator);\n    chunks.push(chunk);\n  }\n\n  return chunks.join(separator);\n};\n\n/**\n * Calculates the entropy of a strong password configuration.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.length - Length of each chunk.\n * @param {number} config.iteration - Number of chunks.\n * @returns {number} Total entropy in bits.\n */\nexport const calculateStrongPasswordEntropy = (config) => {\n  const { length, iteration } = config;\n  const bitsPerChar = Math.log2(BASE64_CHARSET.length); // 6 bits\n  return length * iteration * bitsPerChar;\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Pure generator for base64 passwords.\n * All randomness is provided through the injected random generator port.\n *\n * @module generators/base64\n */\n\nimport { BASE64_CHARSET } from \"../domain/charset.js\";\nimport { validatePositiveInteger } from \"../domain/base64-generation.js\";\n\n/**\n * Generates a single chunk of a base64 password using uniform character selection.\n *\n * @param {number} length - The number of characters to generate.\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @returns {Promise<string>} A random base64 string of the specified length.\n */\nexport const generateBase64Chunk = async (length, randomGenerator) => {\n  validatePositiveInteger(length, \"length\");\n\n  let result = \"\";\n  for (let i = 0; i < length; i++) {\n    const index = await randomGenerator.generateRandomInt(BASE64_CHARSET.length);\n    result += BASE64_CHARSET[index];\n  }\n  return result;\n};\n\n/**\n * Generates a base64 password with multiple chunks separated by a delimiter.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.length - Length of each chunk.\n * @param {number} config.iteration - Number of chunks.\n * @param {string} config.separator - Separator between chunks.\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @returns {Promise<string>} The generated password.\n */\nexport const generateBase64Password = async (config, randomGenerator) => {\n  const { length, iteration, separator } = config;\n\n  validatePositiveInteger(length, \"length\");\n  validatePositiveInteger(iteration, \"iteration\");\n\n  const chunks = [];\n  for (let i = 0; i < iteration; i++) {\n    const chunk = await generateBase64Chunk(length, randomGenerator);\n    chunks.push(chunk);\n  }\n\n  return chunks.join(separator);\n};\n\n/**\n * Calculates the entropy of a base64 password configuration.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.length - Length of each chunk.\n * @param {number} config.iteration - Number of chunks.\n * @returns {number} Total entropy in bits.\n */\nexport const calculateBase64PasswordEntropy = (config) => {\n  const { length, iteration } = config;\n  const bitsPerChar = Math.log2(BASE64_CHARSET.length); // 6 bits\n  return length * iteration * bitsPerChar;\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Pure generator for memorable (dictionary-based) passwords.\n * All randomness and dictionary access is provided through injected ports.\n *\n * @module generators/memorable\n */\n\nimport { validatePositiveInteger } from \"../domain/base64-generation.js\";\n\n/**\n * Generates a memorable password using dictionary words.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.iteration - Number of words to use.\n * @param {string} config.separator - Separator between words.\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @param {Object} dictionary - DictionaryPort implementation.\n * @returns {Promise<string>} The generated password.\n */\nexport const generateMemorablePassword = async (config, randomGenerator, dictionary) => {\n  const { iteration, separator } = config;\n\n  validatePositiveInteger(iteration, \"iteration\");\n\n  // Ensure dictionary is loaded\n  const words = await dictionary.loadDictionary();\n  if (!words || words.length === 0) {\n    throw new Error(\"Dictionary is empty or not loaded\");\n  }\n\n  const selectedWords = [];\n  for (let i = 0; i < iteration; i++) {\n    const word = await dictionary.selectRandomWord(async (max) => {\n      return randomGenerator.generateRandomInt(max);\n    });\n    selectedWords.push(word);\n  }\n\n  return selectedWords.join(separator);\n};\n\n/**\n * Calculates the entropy of a memorable password configuration.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.iteration - Number of words.\n * @param {number} [config.dictionarySize] - Size of the dictionary.\n * @returns {number} Total entropy in bits.\n */\nexport const calculateMemorablePasswordEntropy = (config) => {\n  const { iteration, dictionarySize = 7776 } = config;\n  const bitsPerWord = Math.log2(dictionarySize);\n  return iteration * bitsPerWord;\n};\n\n/**\n * Generates a passphrase with optional word transformations.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.iteration - Number of words.\n * @param {string} config.separator - Separator between words.\n * @param {Object} [config.transforms] - Optional transformations.\n * @param {boolean} [config.transforms.capitalize] - Capitalize first letter of each word.\n * @param {boolean} [config.transforms.uppercase] - Convert all to uppercase.\n * @param {boolean} [config.transforms.appendNumber] - Append a random number.\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @param {Object} dictionary - DictionaryPort implementation.\n * @returns {Promise<string>} The generated passphrase.\n */\nexport const generatePassphrase = async (config, randomGenerator, dictionary) => {\n  const { iteration, separator, transforms = {} } = config;\n\n  let password = await generateMemorablePassword(\n    { iteration, separator },\n    randomGenerator,\n    dictionary\n  );\n\n  // Apply transformations\n  if (transforms.capitalize) {\n    password = password\n      .split(separator)\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(separator);\n  }\n\n  if (transforms.uppercase) {\n    password = password.toUpperCase();\n  }\n\n  if (transforms.appendNumber) {\n    const num = await randomGenerator.generateRandomInt(1000);\n    password = `${password}${num}`;\n  }\n\n  return password;\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Pure generator for quantum-resistant passwords.\n * Designed to provide ultra-high entropy for post-quantum cryptography scenarios.\n * All randomness is provided through the injected random generator port.\n *\n * @module generators/quantum\n */\n\nimport { BASE64_CHARSET } from \"../domain/charset.js\";\nimport { validatePositiveInteger } from \"../domain/base64-generation.js\";\n\n/**\n * Minimum entropy target for quantum-resistant passwords (256 bits).\n * This provides adequate security against quantum computer attacks.\n */\nconst QUANTUM_ENTROPY_TARGET_BITS = 256;\n\n/**\n * Entropy per character in base64 (log2(64) = 6 bits).\n */\nconst ENTROPY_PER_CHAR = Math.log2(BASE64_CHARSET.length);\n\n/**\n * Minimum character length to achieve quantum-resistant entropy.\n */\nexport const QUANTUM_MIN_LENGTH = Math.ceil(QUANTUM_ENTROPY_TARGET_BITS / ENTROPY_PER_CHAR);\n\n/**\n * Generates a single chunk of a quantum-resistant password using uniform character selection.\n * Uses the same character selection logic as strong passwords but with quantum-resistant defaults.\n *\n * @param {number} length - The number of characters to generate.\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @returns {Promise<string>} A random string of the specified length.\n */\nexport const generateQuantumChunk = async (length, randomGenerator) => {\n  validatePositiveInteger(length, \"length\");\n\n  if (length < QUANTUM_MIN_LENGTH) {\n    console.warn(\n      `Warning: Quantum password length (${length}) is below recommended minimum (${QUANTUM_MIN_LENGTH} chars) for 256-bit entropy.`\n    );\n  }\n\n  let result = \"\";\n  for (let i = 0; i < length; i++) {\n    const index = await randomGenerator.generateRandomInt(BASE64_CHARSET.length);\n    result += BASE64_CHARSET[index];\n  }\n  return result;\n};\n\n/**\n * Generates a quantum-resistant password with ultra-high entropy.\n * Designed to withstand attacks from both classical and quantum computers.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.length - Length of each chunk (recommended: 43+ for 256+ bit entropy).\n * @param {number} config.iteration - Number of chunks.\n * @param {string} config.separator - Separator between chunks.\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @returns {Promise<string>} The generated quantum-resistant password.\n */\nexport const generateQuantumPassword = async (config, randomGenerator) => {\n  const { length, iteration, separator } = config;\n\n  validatePositiveInteger(length, \"length\");\n  validatePositiveInteger(iteration, \"iteration\");\n\n  // Ensure total entropy meets quantum-resistant requirements\n  const totalEntropy = calculateQuantumPasswordEntropy(config);\n  if (totalEntropy < QUANTUM_ENTROPY_TARGET_BITS) {\n    console.warn(\n      `Warning: Total entropy (${totalEntropy.toFixed(\n        1\n      )} bits) is below quantum-resistant target (${QUANTUM_ENTROPY_TARGET_BITS} bits).`\n    );\n  }\n\n  const chunks = [];\n  for (let i = 0; i < iteration; i++) {\n    const chunk = await generateQuantumChunk(length, randomGenerator);\n    chunks.push(chunk);\n  }\n\n  return chunks.join(separator);\n};\n\n/**\n * Calculates the entropy of a quantum-resistant password configuration.\n * Returns total entropy in bits across all chunks.\n *\n * @param {Object} config - Password configuration.\n * @param {number} config.length - Length of each chunk.\n * @param {number} config.iteration - Number of chunks.\n * @returns {number} Total entropy in bits.\n */\nexport const calculateQuantumPasswordEntropy = (config) => {\n  const { length, iteration } = config;\n  return length * iteration * ENTROPY_PER_CHAR;\n};\n\n/**\n * Validates that a configuration meets quantum-resistant entropy requirements.\n *\n * @param {Object} config - Password configuration to validate.\n * @returns {Object} Validation result with isQuantumSafe boolean and entropyBits number.\n */\nexport const validateQuantumSecurity = (config) => {\n  const entropyBits = calculateQuantumPasswordEntropy(config);\n  return {\n    isQuantumSafe: entropyBits >= QUANTUM_ENTROPY_TARGET_BITS,\n    entropyBits,\n    recommendedMinLength: QUANTUM_MIN_LENGTH,\n    target: QUANTUM_ENTROPY_TARGET_BITS,\n  };\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Pure domain logic for password type definitions and patterns.\n * This module defines the structure and rules for different password types.\n *\n * @module password-types\n */\n\n/**\n * Enumeration of supported password types\n */\nexport const PASSWORD_TYPES = {\n  STRONG: \"strong\",\n  BASE64: \"base64\",\n  MEMORABLE: \"memorable\",\n  QUANTUM: \"quantum-resistant\",\n};\n\n/**\n * Enumeration of internal generation strategies\n */\nexport const GENERATION_STRATEGIES = {\n  BASE64: \"base64\",\n  BASE64_CHUNK: \"base64-chunk\",\n  SYLLABLE: \"syllable\",\n  DICTIONARY: \"dictionary\",\n};\n\n/**\n * Valid password types for user-facing API\n */\nexport const VALID_PASSWORD_TYPES = [\"strong\", \"base64\", \"memorable\", \"quantum-resistant\"];\n\n/**\n * Checks if a password type is valid\n * @param {string} type - The password type to validate\n * @returns {boolean} True if the type is valid\n */\nexport const isValidPasswordType = (type) => {\n  return VALID_PASSWORD_TYPES.includes(type);\n};\n\n/**\n * Password type metadata defining characteristics and constraints\n */\nexport const PASSWORD_TYPE_METADATA = {\n  [PASSWORD_TYPES.STRONG]: {\n    name: \"Strong Password\",\n    description: \"Cryptographically secure base64-encoded random bytes\",\n    minLength: 1,\n    maxLength: 1024,\n    entropyPerUnit: 6, // bits per character (log2(64))\n    unitType: \"character\",\n    pattern: /^[A-Za-z0-9+/]+$/,\n    useCases: [\"High-entropy passwords\", \"API tokens\", \"Secure credentials\"],\n  },\n  [PASSWORD_TYPES.BASE64]: {\n    name: \"Base64 Password\",\n    description: \"Uniform random selection from base64 character set\",\n    minLength: 1,\n    maxLength: 1024,\n    entropyPerUnit: 6, // bits per character (log2(64))\n    unitType: \"character\",\n    pattern: /^[A-Za-z0-9+/]+$/,\n    useCases: [\"Fixed-length passwords\", \"Avoid base64 padding\"],\n  },\n  [PASSWORD_TYPES.MEMORABLE]: {\n    name: \"Memorable Password\",\n    description: \"Passwords composed of dictionary words with separators\",\n    minLength: 1,\n    maxLength: 20,\n    entropyPerUnit: null, // Depends on dictionary size\n    unitType: \"word\",\n    pattern: null, // Depends on dictionary and separator\n    useCases: [\"Passphrase generation\", \"XKCD-style passwords\", \"Human-memorable\"],\n  },\n  [PASSWORD_TYPES.QUANTUM]: {\n    name: \"Quantum-Resistant Password\",\n    description: \"Ultra-high entropy passwords designed for quantum-resistant security\",\n    minLength: 32,\n    maxLength: 128,\n    entropyPerUnit: 6, // bits per character (log2(64))\n    unitType: \"character\",\n    pattern: /^[A-Za-z0-9+/]+$/,\n    useCases: [\"Post-quantum cryptography\", \"Maximum security\", \"Future-proof credentials\"],\n  },\n};\n\n/**\n * Validates password type configuration\n * @param {string} type - The password type to validate\n * @param {Object} config - Configuration object for the password type\n * @returns {Object} Validation result with isValid boolean and errors array\n */\nexport const validatePasswordTypeConfig = (type, config) => {\n  const errors = [];\n\n  if (!isValidPasswordType(type)) {\n    errors.push(`Invalid password type: ${type}. Valid types: ${VALID_PASSWORD_TYPES.join(\", \")}`);\n    return { isValid: false, errors };\n  }\n\n  const metadata = PASSWORD_TYPE_METADATA[type];\n  const { length, iteration } = config;\n\n  // Validate iteration\n  if (iteration !== undefined) {\n    if (!Number.isInteger(iteration) || iteration < 1) {\n      errors.push(\"Iteration must be a positive integer\");\n    }\n  }\n\n  // Validate length for types that require it\n  if (type !== PASSWORD_TYPES.MEMORABLE && length !== undefined) {\n    if (!Number.isInteger(length) || length < metadata.minLength) {\n      errors.push(`Length must be at least ${metadata.minLength}`);\n    }\n    if (length > metadata.maxLength) {\n      errors.push(`Length must not exceed ${metadata.maxLength}`);\n    }\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n  };\n};\n\n/**\n * Gets the expected entropy for a password type configuration\n * @param {string} type - The password type\n * @param {Object} config - Configuration object\n * @returns {number} Expected entropy in bits\n */\nexport const getExpectedEntropy = (type, config) => {\n  const metadata = PASSWORD_TYPE_METADATA[type];\n  if (!metadata) return 0;\n\n  const { length = 16, iteration = 1, dictionarySize = 7776 } = config;\n\n  // Handle memorable type (uses dictionary size, not entropyPerUnit)\n  if (type === PASSWORD_TYPES.MEMORABLE) {\n    return iteration * Math.log2(dictionarySize);\n  }\n\n  // Strong and Base64 types use entropyPerUnit from metadata\n  return length * metadata.entropyPerUnit * iteration;\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Password generator exports.\n *\n * @module generators\n */\n\nexport { generateChunk, generateStrongPassword, calculateStrongPasswordEntropy } from \"./strong.js\";\n\nexport {\n  generateBase64Chunk,\n  generateBase64Password,\n  calculateBase64PasswordEntropy,\n} from \"./base64.js\";\n\nexport {\n  generateMemorablePassword,\n  calculateMemorablePasswordEntropy,\n  generatePassphrase,\n} from \"./memorable.js\";\n\nexport {\n  generateQuantumChunk,\n  generateQuantumPassword,\n  calculateQuantumPasswordEntropy,\n  validateQuantumSecurity,\n} from \"./quantum.js\";\n\nimport { generateStrongPassword, calculateStrongPasswordEntropy } from \"./strong.js\";\nimport { generateBase64Password, calculateBase64PasswordEntropy } from \"./base64.js\";\nimport { generateMemorablePassword, calculateMemorablePasswordEntropy } from \"./memorable.js\";\nimport { generateQuantumPassword, calculateQuantumPasswordEntropy } from \"./quantum.js\";\nimport { PASSWORD_TYPES, isValidPasswordType } from \"../domain/password-types.js\";\nimport { PASSWORD_ERRORS } from \"../errors.js\";\n\n/**\n * Generator registry mapping password types to their implementations.\n */\nexport const GENERATOR_REGISTRY = {\n  [PASSWORD_TYPES.STRONG]: {\n    generate: generateStrongPassword,\n    calculateEntropy: calculateStrongPasswordEntropy,\n  },\n  [PASSWORD_TYPES.BASE64]: {\n    generate: generateBase64Password,\n    calculateEntropy: calculateBase64PasswordEntropy,\n  },\n  [PASSWORD_TYPES.MEMORABLE]: {\n    generate: generateMemorablePassword,\n    calculateEntropy: calculateMemorablePasswordEntropy,\n  },\n  [PASSWORD_TYPES.QUANTUM]: {\n    generate: generateQuantumPassword,\n    calculateEntropy: calculateQuantumPasswordEntropy,\n  },\n};\n\n/**\n * Gets the generator for a password type.\n *\n * @param {string} type - The password type.\n * @returns {Object} The generator object with generate and calculateEntropy methods.\n * @throws {Error} If the password type is invalid.\n */\nexport const getGenerator = (type) => {\n  if (!isValidPasswordType(type)) {\n    throw new Error(PASSWORD_ERRORS.UNKNOWN_TYPE(type));\n  }\n  return GENERATOR_REGISTRY[type];\n};\n\n/**\n * Generates a password of the specified type.\n *\n * @param {Object} config - Password configuration.\n * @param {string} config.type - Password type (strong, base64, memorable, quantum).\n * @param {number} [config.length] - Length of each chunk (for strong/base64).\n * @param {number} config.iteration - Number of chunks/words.\n * @param {string} config.separator - Separator between chunks/words.\n * @param {Object} ports - Port implementations.\n * @param {Object} ports.randomGenerator - RandomGeneratorPort implementation.\n * @param {Object} [ports.dictionary] - DictionaryPort implementation (for memorable).\n * @returns {Promise<string>} The generated password.\n */\nexport const generate = async (config, ports) => {\n  const { type } = config;\n  const generator = getGenerator(type);\n\n  if (type === PASSWORD_TYPES.MEMORABLE) {\n    if (!ports.dictionary) {\n      throw new Error(\"DictionaryPort is required for memorable passwords\");\n    }\n    return generator.generate(config, ports.randomGenerator, ports.dictionary);\n  }\n\n  return generator.generate(config, ports.randomGenerator);\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Pure domain logic for entropy calculations in password generation.\n * These functions provide cryptographic entropy analysis without side effects.\n *\n * @module entropy-calculator\n */\n\n/**\n * Entropy calculation constants\n */\nexport const ENTROPY_CONSTANTS = {\n  // Base64 charset has 64 possible values = 6 bits per character\n  BASE64_BITS_PER_CHAR: Math.log2(64),\n  // Dictionary entropy depends on dictionary size\n  DICTIONARY_ENTRIES: null, // Will be set when dictionary is loaded\n};\n\n/**\n * Calculates entropy for base64 password generation\n * @param {number} byteLength - Number of random bytes generated\n * @return {number} Estimated entropy in bits\n */\nexport const calculateBase64Entropy = (byteLength) => {\n  // Each random byte provides 8 bits of entropy\n  return byteLength * 8;\n};\n\n/**\n * Calculates entropy for base64 chunk generation\n * @param {number} characterLength - Number of characters in the chunk\n * @return {number} Estimated entropy in bits\n */\nexport const calculateBase64ChunkEntropy = (characterLength) => {\n  // Each base64 character provides log2(64) = 6 bits of entropy\n  return characterLength * ENTROPY_CONSTANTS.BASE64_BITS_PER_CHAR;\n};\n\n/**\n * Calculates entropy for dictionary-based password generation\n * @param {number} dictionarySize - Number of entries in the dictionary\n * @param {number} wordCount - Number of words selected\n * @return {number} Estimated entropy in bits\n */\nexport const calculateDictionaryEntropy = (dictionarySize, wordCount) => {\n  // Each word selection provides log2(dictionarySize) bits of entropy\n  const bitsPerWord = Math.log2(dictionarySize);\n  return wordCount * bitsPerWord;\n};\n\n/**\n * Calculates entropy for character set based generation\n * @param {number} charsetSize - Size of the character set\n * @param {number} length - Number of characters generated\n * @return {number} Estimated entropy in bits\n */\nexport const calculateCharsetEntropy = (charsetSize, length) => {\n  // Each character provides log2(charsetSize) bits of entropy\n  const bitsPerChar = Math.log2(charsetSize);\n  return length * bitsPerChar;\n};\n\n/**\n * Calculates entropy for syllable-based password generation\n * @param {number} syllableCount - Number of syllables in the password\n * @return {number} Estimated entropy in bits\n */\nexport const calculateSyllableEntropy = (syllableCount) => {\n  // Each syllable is consonant-vowel-consonant (21 * 5 * 21 = 2205 combinations)\n  const combinationsPerSyllable = 21 * 5 * 21; // CONSONANTS.length * VOWELS.length * CONSONANTS.length\n  const bitsPerSyllable = Math.log2(combinationsPerSyllable);\n  return syllableCount * bitsPerSyllable;\n};\n\n/**\n * Determines security level based on total entropy\n * @param {number} entropyBits - Total entropy in bits\n * @return {string} Security level classification\n */\nexport const getSecurityLevel = (entropyBits) => {\n  if (entropyBits >= 256) {\n    return \"EXCELLENT (256+ bits)\";\n  }\n  if (entropyBits >= 128) {\n    return \"STRONG (128-255 bits)\";\n  }\n  if (entropyBits >= 80) {\n    return \"GOOD (80-127 bits)\";\n  }\n  if (entropyBits >= 64) {\n    return \"MODERATE (64-79 bits)\";\n  }\n  return \"WEAK (<64 bits)\";\n};\n\n/**\n * Provides security recommendations based on entropy level\n * @param {number} entropyBits - Total entropy in bits\n * @return {string} Security recommendation\n */\nexport const getSecurityRecommendation = (entropyBits) => {\n  if (entropyBits >= 128) {\n    return \"Excellent security. Suitable for high-security applications.\";\n  } else if (entropyBits >= 80) {\n    return \"Good security for most applications. Consider increasing length for high-security needs.\";\n  } else {\n    return \"Consider increasing password length or iteration count for better security.\";\n  }\n};\n\n/**\n * Calculates total entropy for a password configuration\n * @param {Object} config - Password generation configuration\n * @param {string} config.type - Password type (strong, base64, memorable)\n * @param {number} config.length - Character length per chunk\n * @param {number} config.iteration - Number of chunks/words\n * @param {number} [config.dictionarySize] - Size of dictionary for memorable passwords\n * @returns {number} Total entropy in bits\n */\nexport const calculateTotalEntropy = (config) => {\n  const { type, length = 16, iteration = 1, dictionarySize = 7776 } = config;\n\n  switch (type) {\n    case \"strong\":\n    case \"base64\":\n    case \"quantum-resistant\":\n      return calculateBase64ChunkEntropy(length) * iteration;\n    case \"memorable\":\n      return calculateDictionaryEntropy(dictionarySize, iteration);\n    default:\n      return 0;\n  }\n};\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Core service factory for password generation.\n * This is the main entry point for creating a password generation service.\n *\n * @module service\n */\n\nimport {\n  validatePorts,\n  NoOpLogger,\n  MemoryStorage,\n  FixedClock,\n  MemoryDictionary,\n  DEFAULT_WORD_LIST,\n} from \"./ports/index.js\";\nimport { generate, GENERATOR_REGISTRY } from \"./generators/index.js\";\nimport {\n  isValidPasswordType,\n  VALID_PASSWORD_TYPES,\n  validatePasswordTypeConfig,\n} from \"./domain/password-types.js\";\nimport {\n  calculateTotalEntropy,\n  getSecurityLevel,\n  getSecurityRecommendation,\n} from \"./domain/entropy-calculator.js\";\nimport { PASSWORD_ERRORS } from \"./errors.js\";\n\n/**\n * Creates a password generation service with injected ports.\n *\n * @param {Object} config - Service configuration.\n * @param {boolean} [config.validateOnInit=true] - Whether to validate ports on initialization.\n * @param {Object} ports - Port implementations.\n * @param {Object} ports.randomGenerator - RandomGeneratorPort implementation (required).\n * @param {Object} [ports.logger] - LoggerPort implementation.\n * @param {Object} [ports.storage] - StoragePort implementation.\n * @param {Object} [ports.clock] - ClockPort implementation.\n * @param {Object} [ports.dictionary] - DictionaryPort implementation.\n * @returns {Object} Password generation service.\n * @throws {Error} If required ports are missing or invalid.\n */\nexport function createService(config = {}, ports) {\n  const { validateOnInit = true } = config;\n\n  // Fill in defaults for optional ports\n  const resolvedPorts = {\n    randomGenerator: ports.randomGenerator,\n    logger: ports.logger ?? new NoOpLogger(),\n    storage: ports.storage ?? new MemoryStorage(),\n    clock: ports.clock ?? new FixedClock(),\n    dictionary: ports.dictionary ?? new MemoryDictionary(DEFAULT_WORD_LIST),\n  };\n\n  // Validate ports if requested\n  if (validateOnInit) {\n    const validation = validatePorts(resolvedPorts);\n    if (!validation.isValid) {\n      throw new Error(`Port validation failed: ${validation.errors.join(\"; \")}`);\n    }\n  }\n\n  return {\n    /**\n     * Generates a password with the specified configuration.\n     *\n     * @param {Object} options - Password generation options.\n     * @param {string} options.type - Password type (strong, base64, memorable).\n     * @param {number} [options.length=16] - Length of each chunk.\n     * @param {number} [options.iteration=1] - Number of chunks/words.\n     * @param {string} [options.separator=\"-\"] - Separator between chunks/words.\n     * @returns {Promise<string>} The generated password.\n     */\n    async generate(options) {\n      const { type, length = 16, iteration = 1, separator = \"-\" } = options;\n\n      // Validate type\n      if (!type) {\n        throw new Error(PASSWORD_ERRORS.TYPE_REQUIRED);\n      }\n\n      if (!isValidPasswordType(type)) {\n        throw new Error(PASSWORD_ERRORS.UNKNOWN_TYPE(type, VALID_PASSWORD_TYPES));\n      }\n\n      // Validate configuration\n      const validation = validatePasswordTypeConfig(type, { length, iteration });\n      if (!validation.isValid) {\n        throw new Error(validation.errors.join(\"; \"));\n      }\n\n      // Generate password\n      const generatedConfig = { type, length, iteration, separator };\n      return generate(generatedConfig, resolvedPorts);\n    },\n\n    /**\n     * Generates multiple passwords with different configurations.\n     *\n     * @param {Array<Object>} optionsArray - Array of password options.\n     * @returns {Promise<string[]>} Array of generated passwords.\n     */\n    async generateMultiple(optionsArray) {\n      const results = [];\n      for (const options of optionsArray) {\n        const password = await this.generate(options);\n        results.push(password);\n      }\n      return results;\n    },\n\n    /**\n     * Calculates the entropy for a password configuration.\n     *\n     * @param {Object} options - Password configuration.\n     * @returns {Object} Entropy information.\n     */\n    calculateEntropy(options) {\n      const { type, length = 16, iteration = 1 } = options;\n\n      const totalEntropy = calculateTotalEntropy({ type, length, iteration });\n      const securityLevel = getSecurityLevel(totalEntropy);\n      const recommendation = getSecurityRecommendation(totalEntropy);\n\n      return {\n        totalBits: totalEntropy,\n        securityLevel,\n        recommendation,\n        perUnit: type === \"memorable\" ? totalEntropy / iteration : length * Math.log2(64),\n      };\n    },\n\n    /**\n     * Validates a password configuration without generating.\n     *\n     * @param {Object} options - Password configuration.\n     * @returns {Object} Validation result.\n     */\n    validateConfig(options) {\n      const { type } = options;\n\n      if (!type) {\n        return { isValid: false, errors: [PASSWORD_ERRORS.TYPE_REQUIRED] };\n      }\n\n      if (!isValidPasswordType(type)) {\n        return {\n          isValid: false,\n          errors: [PASSWORD_ERRORS.UNKNOWN_TYPE(type, VALID_PASSWORD_TYPES)],\n        };\n      }\n\n      return validatePasswordTypeConfig(type, options);\n    },\n\n    /**\n     * Gets the list of supported password types.\n     *\n     * @returns {string[]} Array of supported types.\n     */\n    getSupportedTypes() {\n      return [...VALID_PASSWORD_TYPES];\n    },\n\n    /**\n     * Gets the generator for a specific password type.\n     *\n     * @param {string} type - Password type.\n     * @returns {Object|null} Generator or null if not found.\n     */\n    getGenerator(type) {\n      return GENERATOR_REGISTRY[type] ?? null;\n    },\n\n    /**\n     * Gets the resolved ports used by this service.\n     * Useful for debugging and testing.\n     *\n     * @returns {Object} The port implementations.\n     */\n    getPorts() {\n      return { ...resolvedPorts };\n    },\n  };\n}\n\n/**\n * Creates a service with minimal configuration for quick usage.\n *\n * @param {Object} randomGenerator - RandomGeneratorPort implementation.\n * @returns {Object} Password generation service.\n */\nexport function createQuickService(randomGenerator) {\n  return createService({}, { randomGenerator });\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Browser implementation of RandomGeneratorPort using Web Crypto API.\n *\n * This adapter provides cryptographically secure random number generation\n * for browser environments using the Web Crypto API.\n */\n\nimport { RandomGeneratorPort } from \"../../../../packages/core/src/ports/RandomGeneratorPort.js\";\n\n/**\n * Browser-based cryptographically secure random generator.\n * Implements RandomGeneratorPort for Web Crypto API.\n */\nexport class BrowserCryptoRandom extends RandomGeneratorPort {\n  /**\n   * Generates cryptographically secure random bytes.\n   *\n   * @param {number} byteLength - Number of bytes to generate.\n   * @returns {Promise<Uint8Array>} Array of random bytes.\n   * @throws {RangeError} If byteLength is not a positive integer.\n   * @throws {Error} If Web Crypto API is not available.\n   */\n  async generateRandomBytes(byteLength) {\n    if (!Number.isInteger(byteLength) || byteLength < 1) {\n      throw new RangeError(\"byteLength must be a positive integer\");\n    }\n\n    if (typeof crypto === \"undefined\" || !crypto.getRandomValues) {\n      throw new Error(\"Web Crypto API is not available\");\n    }\n\n    const bytes = new Uint8Array(byteLength);\n    crypto.getRandomValues(bytes);\n    return bytes;\n  }\n\n  /**\n   * Generates a cryptographically secure random integer in range [0, max).\n   *\n   * Uses rejection sampling to ensure unbiased distribution.\n   *\n   * @param {number} max - Upper bound (exclusive).\n   * @returns {Promise<number>} Random integer in [0, max).\n   * @throws {RangeError} If max is not a positive integer.\n   */\n  async generateRandomInt(max) {\n    if (!Number.isInteger(max) || max < 1) {\n      throw new RangeError(\"max must be a positive integer\");\n    }\n\n    if (max === 1) {\n      return 0;\n    }\n\n    // Calculate bytes needed to represent max\n    const bytesNeeded = Math.ceil(Math.log2(max + 1) / 8) || 1;\n    const maxValue = Math.floor(256 ** bytesNeeded / max) * max;\n\n    // Rejection sampling for unbiased distribution\n    let randomValue;\n    do {\n      const randomBytes = new Uint8Array(bytesNeeded);\n      crypto.getRandomValues(randomBytes);\n      randomValue = randomBytes.reduce((acc, byte) => acc * 256 + byte, 0);\n    } while (randomValue >= maxValue);\n\n    return randomValue % max;\n  }\n\n  /**\n   * Generates a random Base64-encoded string.\n   *\n   * @param {number} byteLength - Number of random bytes to encode.\n   * @returns {Promise<string>} Base64-encoded random string.\n   */\n  async generateRandomBase64(byteLength) {\n    const bytes = await this.generateRandomBytes(byteLength);\n    // Convert Uint8Array to binary string, then to Base64\n    const binaryString = Array.from(bytes)\n      .map((byte) => String.fromCharCode(byte))\n      .join(\"\");\n    return btoa(binaryString);\n  }\n\n  /**\n   * Generates a random string from a given character set.\n   *\n   * @param {number} length - Length of string to generate.\n   * @param {string} charset - Characters to choose from.\n   * @returns {Promise<string>} Random string of specified length.\n   * @throws {RangeError} If length is not positive or charset is empty.\n   */\n  async generateRandomString(length, charset) {\n    if (!Number.isInteger(length) || length < 1) {\n      throw new RangeError(\"length must be a positive integer\");\n    }\n    if (!charset || charset.length === 0) {\n      throw new RangeError(\"charset must not be empty\");\n    }\n\n    let result = \"\";\n    for (let i = 0; i < length; i++) {\n      const index = await this.generateRandomInt(charset.length);\n      result += charset[index];\n    }\n    return result;\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Browser implementation of StoragePort using Web Storage API.\n *\n * This adapter provides persistent storage for browser environments\n * using localStorage or sessionStorage.\n */\n\nimport { StoragePort } from \"../../../../packages/core/src/ports/StoragePort.js\";\n\n/**\n * Browser-based storage adapter using Web Storage API.\n * Implements StoragePort for localStorage/sessionStorage.\n */\nexport class BrowserStorage extends StoragePort {\n  /**\n   * Creates a BrowserStorage instance.\n   *\n   * @param {Object} options - Configuration options.\n   * @param {boolean} [options.sessionOnly=false] - Use sessionStorage instead of localStorage.\n   * @param {string} [options.prefix=\"pwdgen_\"] - Key prefix for namespacing.\n   */\n  constructor(options = {}) {\n    super();\n    this.prefix = options.prefix ?? \"pwdgen_\";\n\n    // Determine which storage to use\n    if (options.sessionOnly) {\n      this.storage = typeof sessionStorage !== \"undefined\" ? sessionStorage : null;\n    } else {\n      this.storage = typeof localStorage !== \"undefined\" ? localStorage : null;\n    }\n  }\n\n  /**\n   * Prefixes a key with the namespace.\n   *\n   * @param {string} key - The key to prefix.\n   * @returns {string} Prefixed key.\n   * @private\n   */\n  _key(key) {\n    return `${this.prefix}${key}`;\n  }\n\n  /**\n   * Checks if storage is available.\n   *\n   * @returns {boolean} True if storage is available.\n   * @private\n   */\n  _isAvailable() {\n    if (!this.storage) {\n      return false;\n    }\n\n    try {\n      const testKey = \"__storage_test__\";\n      this.storage.setItem(testKey, testKey);\n      this.storage.removeItem(testKey);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Reads a value from storage.\n   *\n   * @param {string} key - The key to read.\n   * @returns {Promise<string|null>} The stored value or null.\n   */\n  async read(key) {\n    if (!this._isAvailable()) {\n      return null;\n    }\n\n    try {\n      return this.storage.getItem(this._key(key));\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Writes a value to storage.\n   *\n   * @param {string} key - The key to write.\n   * @param {string} content - The content to store.\n   * @returns {Promise<void>}\n   * @throws {Error} If storage is not available or quota exceeded.\n   */\n  async write(key, content) {\n    if (!this._isAvailable()) {\n      throw new Error(\"Browser storage is not available\");\n    }\n\n    try {\n      this.storage.setItem(this._key(key), content);\n    } catch (error) {\n      if (error.name === \"QuotaExceededError\") {\n        throw new Error(\"Storage quota exceeded\");\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Checks if a key exists in storage.\n   *\n   * @param {string} key - The key to check.\n   * @returns {Promise<boolean>} True if key exists.\n   */\n  async exists(key) {\n    if (!this._isAvailable()) {\n      return false;\n    }\n\n    return this.storage.getItem(this._key(key)) !== null;\n  }\n\n  /**\n   * Deletes a key from storage.\n   *\n   * @param {string} key - The key to delete.\n   * @returns {Promise<boolean>} True if key was deleted.\n   */\n  async delete(key) {\n    if (!this._isAvailable()) {\n      return false;\n    }\n\n    const existed = await this.exists(key);\n    this.storage.removeItem(this._key(key));\n    return existed;\n  }\n\n  /**\n   * Clears all keys with the configured prefix.\n   *\n   * @returns {Promise<void>}\n   */\n  async clear() {\n    if (!this._isAvailable()) {\n      return;\n    }\n\n    const keysToRemove = [];\n    for (let i = 0; i < this.storage.length; i++) {\n      const key = this.storage.key(i);\n      if (key && key.startsWith(this.prefix)) {\n        keysToRemove.push(key);\n      }\n    }\n\n    for (const key of keysToRemove) {\n      this.storage.removeItem(key);\n    }\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Browser implementation of ClockPort using browser timing APIs.\n *\n * This adapter provides time-related functionality for browser environments\n * using Date and Performance APIs.\n */\n\nimport { ClockPort } from \"../../../../packages/core/src/ports/ClockPort.js\";\n\n/**\n * Browser-based clock adapter.\n * Implements ClockPort for browser environments.\n */\nexport class BrowserClock extends ClockPort {\n  /**\n   * Returns the current timestamp in milliseconds since epoch.\n   *\n   * @returns {number} Current timestamp in milliseconds.\n   */\n  now() {\n    return Date.now();\n  }\n\n  /**\n   * Returns a high-resolution timestamp for performance measurement.\n   *\n   * @returns {number} High-resolution timestamp in milliseconds.\n   */\n  performanceNow() {\n    if (typeof performance !== \"undefined\" && performance.now) {\n      return performance.now();\n    }\n    // Fallback to Date.now() if Performance API not available\n    return Date.now();\n  }\n\n  /**\n   * Returns the current date/time as an ISO 8601 string.\n   *\n   * @returns {string} ISO 8601 formatted date string.\n   */\n  toISOString() {\n    return new Date().toISOString();\n  }\n\n  /**\n   * Measures the execution time of an async function.\n   *\n   * @param {Function} asyncFn - Async function to measure.\n   * @returns {Promise<{result: *, elapsed: number}>} Result and elapsed time in ms.\n   */\n  async measure(asyncFn) {\n    const start = this.performanceNow();\n    const result = await asyncFn();\n    const elapsed = this.performanceNow() - start;\n    return { result, elapsed };\n  }\n\n  /**\n   * Creates a delay for the specified duration.\n   *\n   * @param {number} ms - Duration in milliseconds.\n   * @returns {Promise<void>} Promise that resolves after delay.\n   */\n  async delay(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * UI form state definition.\n *\n * This represents the raw state from UI form controls.\n * It is a pure data structure with no business logic.\n */\n\n/**\n * Represents the state of the password generator form in the UI.\n */\nexport class FormState {\n  /**\n   * Creates a new FormState instance.\n   *\n   * @param {Object} data - Initial state values.\n   * @param {string} [data.type=\"\"] - Password type (strong, base64, memorable).\n   * @param {string} [data.length=\"\"] - Password length as string from input.\n   * @param {string} [data.iteration=\"\"] - Number of iterations as string.\n   * @param {string} [data.separator=\"-\"] - Separator character.\n   * @param {string|null} [data.preset=null] - Selected preset name.\n   * @param {boolean} [data.copyToClipboard=false] - Auto-copy to clipboard.\n   * @param {boolean} [data.showPassword=true] - Show or mask password.\n   */\n  constructor(data = {}) {\n    // Form field values (as strings from UI inputs)\n    this.type = data.type ?? \"\";\n    this.length = data.length ?? \"\";\n    this.iteration = data.iteration ?? \"\";\n    this.separator = data.separator ?? \"-\";\n\n    // UI-only state (not sent to core)\n    this.preset = data.preset ?? null;\n    this.copyToClipboard = data.copyToClipboard ?? false;\n    this.showPassword = data.showPassword ?? true;\n  }\n\n  /**\n   * Creates FormState from a preset configuration.\n   *\n   * @param {string} presetName - Name of the preset.\n   * @param {Object} presets - Available preset configurations.\n   * @returns {FormState} New FormState populated from preset.\n   * @throws {Error} If preset name is not found.\n   */\n  static fromPreset(presetName, presets) {\n    const preset = presets[presetName];\n    if (!preset) {\n      throw new Error(`Unknown preset: ${presetName}`);\n    }\n\n    return new FormState({\n      type: preset.type,\n      length: String(preset.length),\n      iteration: String(preset.iteration),\n      separator: preset.separator,\n      preset: presetName,\n    });\n  }\n\n  /**\n   * Creates a copy of the FormState with updated values.\n   *\n   * @param {Object} updates - Values to update.\n   * @returns {FormState} New FormState with updates applied.\n   */\n  with(updates) {\n    return new FormState({\n      type: this.type,\n      length: this.length,\n      iteration: this.iteration,\n      separator: this.separator,\n      preset: this.preset,\n      copyToClipboard: this.copyToClipboard,\n      showPassword: this.showPassword,\n      ...updates,\n    });\n  }\n\n  /**\n   * Checks if form has all required fields populated.\n   *\n   * @returns {boolean} True if required fields are set.\n   */\n  hasRequiredFields() {\n    return this.type !== \"\" && this.iteration !== \"\";\n  }\n\n  /**\n   * Checks if this FormState is equal to another.\n   *\n   * @param {FormState} other - FormState to compare.\n   * @returns {boolean} True if equal.\n   */\n  equals(other) {\n    if (!(other instanceof FormState)) {\n      return false;\n    }\n    return (\n      this.type === other.type &&\n      this.length === other.length &&\n      this.iteration === other.iteration &&\n      this.separator === other.separator &&\n      this.preset === other.preset\n    );\n  }\n\n  /**\n   * Converts FormState to a plain object.\n   *\n   * @returns {Object} Plain object representation.\n   */\n  toJSON() {\n    return {\n      type: this.type,\n      length: this.length,\n      iteration: this.iteration,\n      separator: this.separator,\n      preset: this.preset,\n      copyToClipboard: this.copyToClipboard,\n      showPassword: this.showPassword,\n    };\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Maps UI form state to core service configuration.\n *\n * This is the ONLY place where UI state is transformed to core config.\n * No business logic - pure data transformation.\n */\n\nimport { FormState } from \"./FormState.js\";\n\n/**\n * Mapper between UI FormState and core configuration objects.\n */\nexport class StateToCoreMapper {\n  /**\n   * Transforms FormState to core configuration object.\n   *\n   * This method performs pure data transformation:\n   * - Converts string values to appropriate types\n   * - Filters out empty/undefined values\n   * - Does NOT validate (validation is core's responsibility)\n   *\n   * @param {FormState} formState - UI form state.\n   * @returns {Object} Core configuration for service.generate().\n   */\n  toConfig(formState) {\n    const config = {};\n\n    // Type: required, pass as-is\n    if (formState.type) {\n      config.type = formState.type;\n    }\n\n    // Handle quantum-resistant type specially - it has fixed parameters\n    if (config.type === \"quantum-resistant\") {\n      // Quantum passwords require length >= 32 for 256-bit entropy\n      config.length = 43; // Default for ~258 bits of entropy\n      config.iteration = 1;\n      config.separator = \"\";\n      return config;\n    }\n\n    // Length: optional, parse to integer\n    if (formState.length !== \"\" && formState.length !== undefined) {\n      const parsed = parseInt(formState.length, 10);\n      if (!isNaN(parsed)) {\n        config.length = parsed;\n      }\n    }\n\n    // Iteration: optional, parse to integer\n    if (formState.iteration !== \"\" && formState.iteration !== undefined) {\n      const parsed = parseInt(formState.iteration, 10);\n      if (!isNaN(parsed)) {\n        config.iteration = parsed;\n      }\n    }\n\n    // Separator: optional, pass as-is\n    if (formState.separator !== undefined) {\n      config.separator = formState.separator;\n    }\n\n    return config;\n  }\n\n  /**\n   * Transforms core configuration back to FormState.\n   * Useful for populating forms from saved configurations.\n   *\n   * @param {Object} config - Core configuration object.\n   * @returns {FormState} FormState populated from config.\n   */\n  toFormState(config) {\n    return new FormState({\n      type: config.type ?? \"\",\n      length: config.length !== undefined ? String(config.length) : \"\",\n      iteration: config.iteration !== undefined ? String(config.iteration) : \"\",\n      separator: config.separator ?? \"-\",\n    });\n  }\n\n  /**\n   * Extracts UI-only options from FormState.\n   * These are options that affect UI behavior but not password generation.\n   *\n   * @param {FormState} formState - UI form state.\n   * @returns {Object} UI-specific options.\n   */\n  toUIOptions(formState) {\n    return {\n      copyToClipboard: formState.copyToClipboard,\n      showPassword: formState.showPassword,\n      preset: formState.preset,\n    };\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * View model for password display in UI.\n *\n * Transforms core generation results to UI-ready data.\n * This is a pure transformation layer with no business logic.\n */\n\n/**\n * View model representing a generated password for UI display.\n */\nexport class PasswordViewModel {\n  /**\n   * Creates a PasswordViewModel from generation result data.\n   *\n   * @param {Object} data - Generation result data.\n   * @param {string} data.password - The generated password.\n   * @param {Object} data.entropyInfo - Entropy information from core.\n   * @param {Object} data.config - Configuration used for generation.\n   */\n  constructor(data) {\n    // Password display\n    this.password = data.password;\n    this.maskedPassword = this._maskPassword(data.password);\n    this.length = data.password?.length ?? 0;\n\n    // Entropy display\n    this.entropyBits = data.entropyInfo?.totalBits ?? 0;\n    this.securityLevel = data.entropyInfo?.securityLevel ?? \"unknown\";\n    this.securityRecommendation = data.entropyInfo?.recommendation ?? \"\";\n\n    // Strength indicator (for visual components)\n    this.strengthIndicator = this._mapToStrengthIndicator(data.entropyInfo);\n\n    // Configuration echo (for user reference)\n    this.type = data.config?.type ?? \"\";\n    this.configSummary = this._formatConfigSummary(data.config);\n\n    // Timestamps\n    this.generatedAt = new Date().toISOString();\n  }\n\n  /**\n   * Masks a password for display, showing only first and last 2 chars.\n   *\n   * @param {string} password - Password to mask.\n   * @returns {string} Masked password.\n   * @private\n   */\n  _maskPassword(password) {\n    if (!password) {\n      return \"\";\n    }\n    if (password.length <= 4) {\n      return \"*\".repeat(password.length);\n    }\n    return password.slice(0, 2) + \"*\".repeat(password.length - 4) + password.slice(-2);\n  }\n\n  /**\n   * Maps entropy info to a strength indicator object.\n   *\n   * @param {Object} entropyInfo - Entropy information.\n   * @returns {Object} Strength indicator with level, label, and color.\n   * @private\n   */\n  _mapToStrengthIndicator(entropyInfo) {\n    const bits = entropyInfo?.totalBits ?? 0;\n\n    if (bits >= 128) {\n      return { level: \"maximum\", label: \"Maximum\", dots: 4, color: \"success\" };\n    }\n    if (bits >= 80) {\n      return { level: \"strong\", label: \"Strong\", dots: 3, color: \"success\" };\n    }\n    if (bits >= 64) {\n      return { level: \"medium\", label: \"Medium\", dots: 2, color: \"warning\" };\n    }\n    return { level: \"weak\", label: \"Weak\", dots: 1, color: \"error\" };\n  }\n\n  /**\n   * Formats configuration as a summary string.\n   *\n   * @param {Object} config - Configuration object.\n   * @returns {string} Formatted summary.\n   * @private\n   */\n  _formatConfigSummary(config) {\n    if (!config) {\n      return \"\";\n    }\n\n    const parts = [];\n    if (config.type) {parts.push(`Type: ${config.type}`);}\n    if (config.length) {parts.push(`Length: ${config.length}`);}\n    if (config.iteration) {parts.push(`Iterations: ${config.iteration}`);}\n    if (config.separator) {parts.push(`Separator: \"${config.separator}\"`);}\n    return parts.join(\" | \");\n  }\n\n  /**\n   * Factory method from core generation result.\n   *\n   * @param {Object} result - Core generation result.\n   * @returns {PasswordViewModel} New view model instance.\n   */\n  static fromGenerationResult(result) {\n    return new PasswordViewModel(result);\n  }\n\n  /**\n   * Gets the display password based on visibility setting.\n   *\n   * @param {boolean} showPassword - Whether to show or mask.\n   * @returns {string} Password or masked version.\n   */\n  getDisplayPassword(showPassword = true) {\n    return showPassword ? this.password : this.maskedPassword;\n  }\n\n  /**\n   * Gets strength dots as a visual string.\n   *\n   * @returns {string} Dots representation (e.g., \"\u25CF\u25CF\u25CF\u25CB\").\n   */\n  getStrengthDots() {\n    const filled = this.strengthIndicator.dots;\n    const empty = 4 - filled;\n    return \"\u25CF\".repeat(filled) + \"\u25CB\".repeat(empty);\n  }\n\n  /**\n   * Converts to plain object for JSON serialization.\n   *\n   * @returns {Object} Plain object representation.\n   */\n  toJSON() {\n    return {\n      password: this.password,\n      maskedPassword: this.maskedPassword,\n      length: this.length,\n      entropyBits: this.entropyBits,\n      securityLevel: this.securityLevel,\n      strengthIndicator: this.strengthIndicator,\n      type: this.type,\n      configSummary: this.configSummary,\n      generatedAt: this.generatedAt,\n    };\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * View model for validation display in UI.\n *\n * Maps core validation errors to specific form fields for UI display.\n * This is a pure transformation layer with no validation logic.\n */\n\n/**\n * View model representing validation state for UI display.\n */\nexport class ValidationViewModel {\n  /**\n   * Creates a ValidationViewModel.\n   *\n   * @param {Object} data - Validation data.\n   * @param {boolean} data.isValid - Overall validity.\n   * @param {string[]} data.errors - List of error messages.\n   * @param {Object} data.fieldErrors - Errors mapped to fields.\n   */\n  constructor(data) {\n    this.isValid = data.isValid;\n    this.errors = data.errors;\n    this.fieldErrors = data.fieldErrors;\n\n    // Convenience flags for UI binding\n    this.hasTypeError = data.fieldErrors.type !== null;\n    this.hasLengthError = data.fieldErrors.length !== null;\n    this.hasIterationError = data.fieldErrors.iteration !== null;\n    this.hasSeparatorError = data.fieldErrors.separator !== null;\n    this.hasErrors = !data.isValid;\n  }\n\n  /**\n   * Maps core validation result to field-specific errors for UI display.\n   *\n   * @param {Object} validation - Core validation result.\n   * @param {boolean} validation.isValid - Whether config is valid.\n   * @param {string[]} validation.errors - Array of error messages.\n   * @param {FormState} [formState] - Optional form state for context.\n   * @returns {ValidationViewModel} New view model instance.\n   */\n  // eslint-disable-next-line no-unused-vars\n  static fromValidationResult(validation, formState = null) {\n    const fieldErrors = {\n      type: null,\n      length: null,\n      iteration: null,\n      separator: null,\n    };\n\n    // Parse core errors and map to specific fields\n    for (const error of validation.errors) {\n      const lowerError = error.toLowerCase();\n\n      if (lowerError.includes(\"type\")) {\n        fieldErrors.type = error;\n      } else if (lowerError.includes(\"length\")) {\n        fieldErrors.length = error;\n      } else if (lowerError.includes(\"iteration\")) {\n        fieldErrors.iteration = error;\n      } else if (lowerError.includes(\"separator\")) {\n        fieldErrors.separator = error;\n      }\n    }\n\n    return new ValidationViewModel({\n      isValid: validation.isValid,\n      errors: validation.errors,\n      fieldErrors,\n    });\n  }\n\n  /**\n   * Creates a valid (no errors) view model.\n   *\n   * @returns {ValidationViewModel} Valid view model.\n   */\n  static valid() {\n    return new ValidationViewModel({\n      isValid: true,\n      errors: [],\n      fieldErrors: {\n        type: null,\n        length: null,\n        iteration: null,\n        separator: null,\n      },\n    });\n  }\n\n  /**\n   * Gets error message for a specific field.\n   *\n   * @param {string} fieldName - Name of the field.\n   * @returns {string|null} Error message or null.\n   */\n  getFieldError(fieldName) {\n    return this.fieldErrors[fieldName] ?? null;\n  }\n\n  /**\n   * Checks if a specific field has an error.\n   *\n   * @param {string} fieldName - Name of the field.\n   * @returns {boolean} True if field has error.\n   */\n  hasFieldError(fieldName) {\n    return fieldName in this.fieldErrors && this.fieldErrors[fieldName] !== null;\n  }\n\n  /**\n   * Gets all field names that have errors.\n   *\n   * @returns {string[]} Array of field names with errors.\n   */\n  getErrorFields() {\n    return Object.entries(this.fieldErrors)\n      .filter(([, error]) => error !== null)\n      .map(([field]) => field);\n  }\n\n  /**\n   * Gets the first error message for display.\n   *\n   * @returns {string|null} First error or null.\n   */\n  getFirstError() {\n    return this.errors.length > 0 ? this.errors[0] : null;\n  }\n\n  /**\n   * Converts to plain object for JSON serialization.\n   *\n   * @returns {Object} Plain object representation.\n   */\n  toJSON() {\n    return {\n      isValid: this.isValid,\n      errors: this.errors,\n      fieldErrors: this.fieldErrors,\n    };\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * View model for entropy display in UI.\n *\n * Transforms core entropy information to UI-friendly data.\n * This is a pure transformation layer with no entropy calculations.\n */\n\n/**\n * View model representing entropy information for UI display.\n */\nexport class EntropyViewModel {\n  /**\n   * Creates an EntropyViewModel.\n   *\n   * @param {Object} entropyInfo - Entropy information from core.\n   * @param {number} entropyInfo.totalBits - Total entropy in bits.\n   * @param {number} [entropyInfo.perUnit] - Entropy per unit.\n   * @param {string} [entropyInfo.securityLevel] - Security level label.\n   * @param {string} [entropyInfo.recommendation] - Security recommendation.\n   */\n  constructor(entropyInfo) {\n    this.totalBits = entropyInfo.totalBits ?? 0;\n    this.perUnit = entropyInfo.perUnit ?? 0;\n    this.securityLevel = entropyInfo.securityLevel ?? \"unknown\";\n    this.recommendation = entropyInfo.recommendation ?? \"\";\n\n    // UI-specific computed values\n    this.displayBits = Math.round(this.totalBits);\n    this.strengthPercentage = this._calculatePercentage(this.totalBits);\n    this.strengthLabel = this._getStrengthLabel(this.totalBits);\n    this.strengthColor = this._getStrengthColor(this.totalBits);\n    this.progressBarWidth = `${this.strengthPercentage}%`;\n  }\n\n  /**\n   * Calculates display percentage (capped at 100%).\n   *\n   * @param {number} bits - Entropy bits.\n   * @returns {number} Percentage (0-100).\n   * @private\n   */\n  _calculatePercentage(bits) {\n    // Cap at 256 bits for display purposes (100% = 256 bits)\n    return Math.min(100, Math.round((bits / 256) * 100));\n  }\n\n  /**\n   * Gets strength label based on entropy bits.\n   *\n   * @param {number} bits - Entropy bits.\n   * @returns {string} Strength label.\n   * @private\n   */\n  _getStrengthLabel(bits) {\n    if (bits >= 256) {return \"Excellent\";}\n    if (bits >= 128) {return \"Strong\";}\n    if (bits >= 80) {return \"Good\";}\n    if (bits >= 64) {return \"Moderate\";}\n    if (bits >= 40) {return \"Weak\";}\n    return \"Very Weak\";\n  }\n\n  /**\n   * Gets color name based on entropy bits.\n   *\n   * @param {number} bits - Entropy bits.\n   * @returns {string} Color name.\n   * @private\n   */\n  _getStrengthColor(bits) {\n    if (bits >= 128) {return \"green\";}\n    if (bits >= 80) {return \"blue\";}\n    if (bits >= 64) {return \"yellow\";}\n    if (bits >= 40) {return \"orange\";}\n    return \"red\";\n  }\n\n  /**\n   * Factory method from core entropy info.\n   *\n   * @param {Object} entropyInfo - Core entropy information.\n   * @returns {EntropyViewModel} New view model instance.\n   */\n  static fromEntropyInfo(entropyInfo) {\n    return new EntropyViewModel(entropyInfo);\n  }\n\n  /**\n   * Gets a formatted display string.\n   *\n   * @returns {string} Formatted entropy display.\n   */\n  getDisplayString() {\n    return `${this.displayBits}-bit \u00B7 ${this.strengthLabel}`;\n  }\n\n  /**\n   * Gets ARIA label for accessibility.\n   *\n   * @returns {string} Accessible description.\n   */\n  getAriaLabel() {\n    return `Password strength: ${this.strengthLabel} with ${this.displayBits} bits of entropy`;\n  }\n\n  /**\n   * Converts to plain object for JSON serialization.\n   *\n   * @returns {Object} Plain object representation.\n   */\n  toJSON() {\n    return {\n      totalBits: this.totalBits,\n      displayBits: this.displayBits,\n      securityLevel: this.securityLevel,\n      strengthLabel: this.strengthLabel,\n      strengthColor: this.strengthColor,\n      strengthPercentage: this.strengthPercentage,\n      recommendation: this.recommendation,\n    };\n  }\n}\n", "// Copyright \u00A9 2022-2024 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Web UI Controller - Thin Adapter Pattern\n *\n * This controller is a thin adapter that:\n * 1. Captures UI form state\n * 2. Wires browser adapters to core service\n * 3. Delegates ALL validation to core service via service.validateConfig()\n * 4. Delegates ALL generation to core service via service.generate()\n * 5. Transforms results to view models for rendering\n *\n * NO business rules or validation logic beyond basic type coercion.\n */\n\nimport { createService } from \"../../../../packages/core/src/index.js\";\nimport { BrowserCryptoRandom } from \"../adapters/BrowserCryptoRandom.js\";\nimport { BrowserStorage } from \"../adapters/BrowserStorage.js\";\nimport { BrowserClock } from \"../adapters/BrowserClock.js\";\nimport { StateToCoreMapper } from \"../state/StateToCoreMapper.js\";\nimport { PasswordViewModel } from \"../view-models/PasswordViewModel.js\";\nimport { ValidationViewModel } from \"../view-models/ValidationViewModel.js\";\nimport { EntropyViewModel } from \"../view-models/EntropyViewModel.js\";\n\n/**\n * Web UI controller implementing the thin adapter pattern.\n */\nexport class WebUIController {\n  /**\n   * Creates a WebUIController with browser adapters wired to core service.\n   *\n   * @param {Object} [options] - Configuration options.\n   * @param {Object} [options.randomGenerator] - Custom RandomGeneratorPort.\n   * @param {Object} [options.storage] - Custom StoragePort.\n   * @param {Object} [options.clock] - Custom ClockPort.\n   */\n  constructor(options = {}) {\n    // Wire browser adapters to core service\n    this.service = createService({}, {\n      randomGenerator: options.randomGenerator ?? new BrowserCryptoRandom(),\n      storage: options.storage ?? new BrowserStorage(),\n      clock: options.clock ?? new BrowserClock(),\n    });\n\n    this.stateToCoreMapper = new StateToCoreMapper();\n  }\n\n  /**\n   * Validates form state by delegating to core service.\n   *\n   * @param {FormState} formState - The UI form state.\n   * @returns {ValidationViewModel} View model for UI validation display.\n   */\n  validate(formState) {\n    // Step 1: Map UI state to core config (data transformation only)\n    const config = this.stateToCoreMapper.toConfig(formState);\n\n    // Step 2: Delegate validation to core service\n    const validation = this.service.validateConfig(config);\n\n    // Step 3: Transform to view model\n    return ValidationViewModel.fromValidationResult(validation, formState);\n  }\n\n  /**\n   * Generates a password by delegating to core service.\n   *\n   * @param {FormState} formState - The UI form state.\n   * @returns {Promise<PasswordViewModel>} View model for UI password display.\n   * @throws {Error} If validation fails.\n   */\n  async generate(formState) {\n    // Step 1: Validate first (fail fast)\n    const validation = this.validate(formState);\n    if (!validation.isValid) {\n      throw new Error(validation.errors.join(\"; \"));\n    }\n\n    // Step 2: Map UI state to core config\n    const config = this.stateToCoreMapper.toConfig(formState);\n\n    // Step 3: Delegate generation to core service\n    const password = await this.service.generate(config);\n\n    // Step 4: Get entropy info from core service\n    const entropyInfo = this.service.calculateEntropy(config);\n\n    // Step 5: Transform to view model\n    return PasswordViewModel.fromGenerationResult({\n      password,\n      entropyInfo,\n      config,\n    });\n  }\n\n  /**\n   * Calculates entropy for a configuration without generating.\n   *\n   * @param {FormState} formState - The UI form state.\n   * @returns {EntropyViewModel} View model for entropy display.\n   */\n  calculateEntropy(formState) {\n    const config = this.stateToCoreMapper.toConfig(formState);\n    const entropyInfo = this.service.calculateEntropy(config);\n    return EntropyViewModel.fromEntropyInfo(entropyInfo);\n  }\n\n  /**\n   * Gets supported password types from core service.\n   *\n   * @returns {string[]} Array of supported types.\n   */\n  getSupportedTypes() {\n    return this.service.getSupportedTypes();\n  }\n\n  /**\n   * Gets the core service instance.\n   * Useful for testing and advanced usage.\n   *\n   * @returns {Object} The core password generation service.\n   */\n  getService() {\n    return this.service;\n  }\n\n  /**\n   * Gets the state mapper instance.\n   *\n   * @returns {StateToCoreMapper} The state mapper.\n   */\n  getMapper() {\n    return this.stateToCoreMapper;\n  }\n}\n\n/**\n * Factory function to create a WebUIController.\n *\n * @param {Object} [options] - Configuration options.\n * @returns {WebUIController} New controller instance.\n */\nexport function createWebUIController(options = {}) {\n  return new WebUIController(options);\n}\n", "// Copyright 2022-2026 Password Generator. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0 OR MIT\n\n/**\n * Password Generator Demo - Main Entry Point\n *\n * This demo uses the WebUIController from the thin adapter layer,\n * which delegates all business logic to packages/core.\n */\n\nimport { initTheme } from \"./theme.js\";\nimport { createWebUIController } from \"../../controllers/WebUIController.js\";\nimport { FormState } from \"../../state/FormState.js\";\n\n// Preset configurations (aligned with CLI presets from src/config.js)\nconst PRESETS = {\n  quick: { type: \"strong\", length: 14, iteration: 4, separator: \"-\" },\n  secure: { type: \"strong\", length: 16, iteration: 4, separator: \"\" },\n  memorable: { type: \"memorable\", length: 4, iteration: 4, separator: \"-\" },\n  \"quantum-resistant\": { type: \"quantum-resistant\", length: 43, iteration: 1, separator: \"\" },\n};\n\n// State\nlet controller;\nlet currentPassword = null;\nlet isPasswordVisible = true;\n\n// DOM Elements\nconst elements = {\n  form: null,\n  typeInputs: null,\n  lengthInput: null,\n  lengthGroup: null,\n  iterationInput: null,\n  iterationLabel: null,\n  separatorInput: null,\n  generateBtn: null,\n  generateText: null,\n  generateLoading: null,\n  passwordValue: null,\n  passwordActions: null,\n  strengthIndicator: null,\n  strengthLabel: null,\n  strengthBits: null,\n  strengthDescription: null,\n  copyBtn: null,\n  toggleVisibilityBtn: null,\n  visibilityText: null,\n  regenerateBtn: null,\n  presetBtns: null,\n  toast: null,\n  srAnnouncements: null,\n};\n\n/**\n * Initializes DOM element references.\n */\nfunction initElements() {\n  elements.form = document.getElementById(\"password-form\");\n  elements.typeInputs = document.querySelectorAll(\"input[name=\\\"type\\\"]\");\n  elements.lengthInput = document.getElementById(\"length\");\n  elements.lengthGroup = document.getElementById(\"length-group\");\n  elements.iterationInput = document.getElementById(\"iteration\");\n  elements.iterationLabel = document.getElementById(\"iteration-label\");\n  elements.separatorInput = document.getElementById(\"separator\");\n  elements.generateBtn = document.getElementById(\"generate-btn\");\n  elements.generateText = document.getElementById(\"generate-text\");\n  elements.generateLoading = document.getElementById(\"generate-loading\");\n  elements.passwordValue = document.getElementById(\"password-value\");\n  elements.passwordActions = document.getElementById(\"password-actions\");\n  elements.strengthIndicator = document.getElementById(\"strength-indicator\");\n  elements.strengthLabel = document.getElementById(\"strength-label\");\n  elements.strengthBits = document.getElementById(\"strength-bits\");\n  elements.strengthDescription = document.getElementById(\"strength-description\");\n  elements.copyBtn = document.getElementById(\"copy-btn\");\n  elements.toggleVisibilityBtn = document.getElementById(\"toggle-visibility-btn\");\n  elements.visibilityText = document.getElementById(\"visibility-text\");\n  elements.regenerateBtn = document.getElementById(\"regenerate-btn\");\n  elements.presetBtns = document.querySelectorAll(\".preset-btn\");\n  elements.toast = document.getElementById(\"toast\");\n  elements.srAnnouncements = document.getElementById(\"sr-announcements\");\n}\n\n/**\n * Gets the current form state.\n * @returns {FormState} The current form state.\n */\nfunction getFormState() {\n  const selectedType = document.querySelector(\"input[name=\\\"type\\\"]:checked\");\n\n  return new FormState({\n    type: selectedType?.value || \"strong\",\n    length: elements.lengthInput.value,\n    iteration: elements.iterationInput.value,\n    separator: elements.separatorInput.value,\n  });\n}\n\n/**\n * Updates the UI based on password type selection.\n * @param {string} type - The selected password type.\n */\nfunction updateUIForType(type) {\n  const isMemorableType = type === \"memorable\";\n  const isQuantumType = type === \"quantum-resistant\";\n\n  // Show/hide length field for memorable type, fix for quantum\n  elements.lengthGroup.classList.toggle(\"hidden\", isMemorableType || isQuantumType);\n\n  // Hide chunks and separator for quantum (single high-entropy string)\n  const iterationGroup = elements.iterationInput.closest(\".form-group--inline\");\n  const separatorGroup = elements.separatorInput.closest(\".form-group--inline\");\n  if (iterationGroup) {\n    iterationGroup.classList.toggle(\"hidden\", isQuantumType);\n  }\n  if (separatorGroup) {\n    separatorGroup.classList.toggle(\"hidden\", isQuantumType);\n  }\n\n  // Update iteration label\n  elements.iterationLabel.textContent = isMemorableType ? \"Words\" : \"Chunks\";\n\n  // Update hints\n  const iterationHint = document.getElementById(\"iteration-hint\");\n  if (iterationHint) {\n    iterationHint.textContent = isMemorableType ?\n      \"Number of words to generate\" :\n      \"Number of segments to generate\";\n  }\n}\n\n/**\n * Applies a preset configuration.\n * @param {string} presetName - The preset name.\n */\nfunction applyPreset(presetName) {\n  const preset = PRESETS[presetName];\n  if (!preset) {return;}\n\n  // Update form values\n  const typeInput = document.querySelector(`input[name=\"type\"][value=\"${preset.type}\"]`);\n  if (typeInput) {typeInput.checked = true;}\n\n  elements.lengthInput.value = preset.length;\n  elements.iterationInput.value = preset.iteration;\n  elements.separatorInput.value = preset.separator;\n\n  // Update UI\n  updateUIForType(preset.type);\n\n  // Update preset button states\n  elements.presetBtns.forEach(btn => {\n    btn.classList.toggle(\"preset-btn--active\", btn.dataset.preset === presetName);\n  });\n}\n\n/**\n * Shows a toast notification.\n * @param {string} message - The message to show.\n * @param {'success'|'error'} type - The toast type.\n */\nfunction showToast(message, type = \"success\") {\n  elements.toast.textContent = message;\n  elements.toast.className = `toast toast--${type} toast--visible`;\n\n  setTimeout(() => {\n    elements.toast.classList.remove(\"toast--visible\");\n  }, 2500);\n}\n\n/**\n * Sets the loading state.\n * @param {boolean} isLoading - Whether loading.\n */\nfunction setLoading(isLoading) {\n  elements.generateBtn.disabled = isLoading;\n  elements.generateText.classList.toggle(\"hidden\", isLoading);\n  elements.generateLoading.classList.toggle(\"hidden\", !isLoading);\n}\n\n/**\n * Displays an error.\n * @param {string} message - The error message.\n */\nfunction showError(message) {\n  elements.passwordValue.innerHTML = `<span class=\"text-error\">${escapeHtml(message)}</span>`;\n  // Keep password actions visible so user can regenerate\n  // Only hide the copy/visibility actions, keep regenerate visible\n  elements.copyBtn.disabled = true;\n  elements.toggleVisibilityBtn.disabled = true;\n  elements.strengthIndicator.classList.add(\"hidden\");\n  currentPassword = null;\n}\n\n/**\n * Escapes HTML characters.\n * @param {string} text - Text to escape.\n * @returns {string} Escaped text.\n */\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n/**\n * Displays the generated password.\n * @param {Object} result - The generation result.\n */\nfunction displayPassword(result) {\n  currentPassword = result.password;\n  isPasswordVisible = true;\n\n  // Display password\n  updatePasswordDisplay();\n\n  // Show and enable actions\n  elements.passwordActions.classList.remove(\"hidden\");\n  elements.copyBtn.disabled = false;\n  elements.toggleVisibilityBtn.disabled = false;\n\n  // Update strength indicator\n  updateStrengthIndicator(result);\n\n  // Announce to screen readers\n  announceToScreenReader(`Password generated: ${result.strengthIndicator.label} strength with ${Math.round(result.entropyBits)} bits of entropy`);\n}\n\n/**\n * Updates the password display based on visibility.\n */\nfunction updatePasswordDisplay() {\n  if (!currentPassword) {return;}\n\n  if (isPasswordVisible) {\n    elements.passwordValue.innerHTML = `<span class=\"select-all font-mono\">${escapeHtml(currentPassword)}</span>`;\n    elements.visibilityText.textContent = \"Hide\";\n    elements.toggleVisibilityBtn.setAttribute(\"aria-pressed\", \"true\");\n    elements.toggleVisibilityBtn.setAttribute(\"aria-label\", \"Hide password (currently visible)\");\n  } else {\n    const masked = currentPassword.slice(0, 3) + \"\u2022\".repeat(Math.max(0, currentPassword.length - 6)) + currentPassword.slice(-3);\n    elements.passwordValue.innerHTML = `<span class=\"font-mono\">${escapeHtml(masked)}</span>`;\n    elements.visibilityText.textContent = \"Show\";\n    elements.toggleVisibilityBtn.setAttribute(\"aria-pressed\", \"false\");\n    elements.toggleVisibilityBtn.setAttribute(\"aria-label\", \"Show password (currently hidden)\");\n  }\n}\n\n/**\n * Updates the strength indicator.\n * @param {Object} result - The generation result.\n */\nfunction updateStrengthIndicator(result) {\n  const { strengthIndicator, entropyBits } = result;\n  const roundedBits = Math.round(entropyBits);\n\n  elements.strengthIndicator.classList.remove(\"hidden\");\n  elements.strengthIndicator.className = `strength strength--${strengthIndicator.level}`;\n\n  // Update ARIA attributes for the meter (WCAG 2.2 AAA)\n  elements.strengthIndicator.setAttribute(\"aria-valuenow\", strengthIndicator.dots);\n  elements.strengthIndicator.setAttribute(\"aria-valuetext\", `${strengthIndicator.label} strength, ${roundedBits} bits of entropy`);\n\n  // Update dots\n  const dots = elements.strengthIndicator.querySelectorAll(\".strength__dot\");\n  dots.forEach((dot, index) => {\n    dot.classList.toggle(\"strength__dot--filled\", index < strengthIndicator.dots);\n  });\n\n  // Update labels\n  elements.strengthLabel.textContent = `${strengthIndicator.label}`;\n  elements.strengthBits.textContent = `${roundedBits}-bit`;\n\n  // Update screen reader description\n  if (elements.strengthDescription) {\n    elements.strengthDescription.textContent = `Password strength: ${strengthIndicator.label} with ${roundedBits} bits of entropy`;\n  }\n}\n\n/**\n * Announces a message to screen readers using the dedicated live region.\n * @param {string} message - The message to announce.\n */\nfunction announceToScreenReader(message) {\n  // Use the dedicated announcement region if available\n  if (elements.srAnnouncements) {\n    // Clear previous announcement\n    elements.srAnnouncements.textContent = \"\";\n    // Small delay to ensure screen readers detect the change\n    setTimeout(() => {\n      elements.srAnnouncements.textContent = message;\n    }, 50);\n  } else {\n    // Fallback: create temporary announcement element\n    const announcement = document.createElement(\"div\");\n    announcement.setAttribute(\"role\", \"status\");\n    announcement.setAttribute(\"aria-live\", \"assertive\");\n    announcement.className = \"sr-only\";\n    announcement.textContent = message;\n    document.body.appendChild(announcement);\n\n    setTimeout(() => announcement.remove(), 1000);\n  }\n}\n\n/**\n * Copies the password to clipboard.\n */\nasync function copyToClipboard() {\n  if (!currentPassword) {return;}\n\n  try {\n    await navigator.clipboard.writeText(currentPassword);\n    showToast(\"Copied to clipboard!\", \"success\");\n    announceToScreenReader(\"Password copied to clipboard\");\n  } catch {\n    // Fallback for older browsers\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = currentPassword;\n    textarea.style.position = \"fixed\";\n    textarea.style.opacity = \"0\";\n    document.body.appendChild(textarea);\n    textarea.select();\n\n    try {\n      document.execCommand(\"copy\");\n      showToast(\"Copied to clipboard!\", \"success\");\n      announceToScreenReader(\"Password copied to clipboard\");\n    } catch {\n      showToast(\"Failed to copy. Please copy manually.\", \"error\");\n      announceToScreenReader(\"Failed to copy password. Please copy manually.\");\n    }\n\n    document.body.removeChild(textarea);\n  }\n}\n\n/**\n * Generates a password.\n */\nasync function generatePassword() {\n  setLoading(true);\n\n  try {\n    const formState = getFormState();\n    const result = await controller.generate(formState);\n    displayPassword(result);\n  } catch (error) {\n    showError(error.message);\n    showToast(error.message, \"error\");\n  } finally {\n    setLoading(false);\n  }\n}\n\n/**\n * Sets up event listeners.\n */\nfunction setupEventListeners() {\n  // Form submit\n  elements.form.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    await generatePassword();\n  });\n\n  // Type change\n  elements.typeInputs.forEach(input => {\n    input.addEventListener(\"change\", () => {\n      updateUIForType(input.value);\n      // Clear active preset\n      elements.presetBtns.forEach(btn => btn.classList.remove(\"preset-btn--active\"));\n    });\n  });\n\n  // Preset buttons\n  elements.presetBtns.forEach(btn => {\n    btn.addEventListener(\"click\", () => {\n      applyPreset(btn.dataset.preset);\n    });\n  });\n\n  // Copy button\n  elements.copyBtn.addEventListener(\"click\", copyToClipboard);\n\n  // Toggle visibility\n  elements.toggleVisibilityBtn.addEventListener(\"click\", () => {\n    isPasswordVisible = !isPasswordVisible;\n    updatePasswordDisplay();\n    announceToScreenReader(isPasswordVisible ? \"Password is now visible\" : \"Password is now hidden\");\n  });\n\n  // Regenerate\n  elements.regenerateBtn.addEventListener(\"click\", generatePassword);\n\n  // Keyboard shortcuts\n  document.addEventListener(\"keydown\", (e) => {\n    // Ctrl/Cmd + Enter to generate\n    if ((e.ctrlKey || e.metaKey) && e.key === \"Enter\") {\n      e.preventDefault();\n      generatePassword();\n    }\n\n    // Ctrl/Cmd + C when password is focused to copy\n    if ((e.ctrlKey || e.metaKey) && e.key === \"c\" && currentPassword) {\n      const selection = window.getSelection();\n      if (selection && selection.toString() === \"\") {\n        // No text selected, copy password\n        e.preventDefault();\n        copyToClipboard();\n      }\n    }\n  });\n}\n\n/**\n * Initializes the application.\n */\nasync function init() {\n  // Initialize theme\n  initTheme();\n\n  // Initialize DOM references\n  initElements();\n\n  // Create controller\n  controller = createWebUIController();\n\n  // Set up event listeners\n  setupEventListeners();\n\n  // Apply default preset\n  applyPreset(\"quick\");\n\n  // Generate initial password\n  await generatePassword();\n}\n\n// Start the app when DOM is ready\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", init);\n} else {\n  init();\n}\n"],
  "mappings": "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",
  "names": ["THEME_KEY", "THEMES", "getSystemPreference", "getStoredTheme", "stored", "storeTheme", "theme", "applyTheme", "metaThemeColor", "resolveTheme", "preference", "updateToggleIcon", "toggle", "icon", "initTheme", "resolved", "e", "newTheme", "next", "CRYPTO_ERRORS", "paramName", "PASSWORD_ERRORS", "type", "validTypes", "PORT_ERRORS", "missingPorts", "requiredPorts", "portName", "expectedClass", "LoggerPort", "_message", "_metadata", "_error", "NoOpLogger", "LoggerPort", "StoragePort", "_key", "_content", "MemoryStorage", "StoragePort", "key", "content", "ClockPort", "FixedClock", "ClockPort", "timestamp", "milliseconds", "DictionaryPort", "_randomIntFn", "MemoryDictionary", "DictionaryPort", "words", "randomIntFn", "index", "DEFAULT_WORD_LIST", "RandomGeneratorPort", "_byteLength", "_max", "_length", "_charset", "PORT_SCHEMA", "hasRequiredMethods", "port", "requiredMethods", "method", "validatePorts", "ports", "errors", "requiredPorts", "schema", "name", "missingPorts", "PORT_ERRORS", "portName", "BASE64_CHARSET", "VOWELS", "CONSONANTS", "CHARACTER_SET_METADATA", "validatePositiveInteger", "value", "name", "CRYPTO_ERRORS", "generateChunk", "length", "randomGenerator", "validatePositiveInteger", "result", "i", "index", "BASE64_CHARSET", "generateStrongPassword", "config", "iteration", "separator", "chunks", "chunk", "calculateStrongPasswordEntropy", "bitsPerChar", "generateBase64Chunk", "length", "randomGenerator", "validatePositiveInteger", "result", "i", "index", "BASE64_CHARSET", "generateBase64Password", "config", "iteration", "separator", "chunks", "chunk", "calculateBase64PasswordEntropy", "bitsPerChar", "generateMemorablePassword", "config", "randomGenerator", "dictionary", "iteration", "separator", "validatePositiveInteger", "words", "selectedWords", "i", "word", "max", "calculateMemorablePasswordEntropy", "dictionarySize", "bitsPerWord", "QUANTUM_ENTROPY_TARGET_BITS", "ENTROPY_PER_CHAR", "BASE64_CHARSET", "QUANTUM_MIN_LENGTH", "generateQuantumChunk", "length", "randomGenerator", "validatePositiveInteger", "result", "i", "index", "generateQuantumPassword", "config", "iteration", "separator", "totalEntropy", "calculateQuantumPasswordEntropy", "chunks", "chunk", "PASSWORD_TYPES", "VALID_PASSWORD_TYPES", "isValidPasswordType", "type", "PASSWORD_TYPE_METADATA", "PASSWORD_TYPES", "validatePasswordTypeConfig", "config", "errors", "metadata", "length", "iteration", "GENERATOR_REGISTRY", "PASSWORD_TYPES", "generateStrongPassword", "calculateStrongPasswordEntropy", "generateBase64Password", "calculateBase64PasswordEntropy", "generateMemorablePassword", "calculateMemorablePasswordEntropy", "generateQuantumPassword", "calculateQuantumPasswordEntropy", "getGenerator", "type", "isValidPasswordType", "PASSWORD_ERRORS", "generate", "config", "ports", "generator", "ENTROPY_CONSTANTS", "calculateBase64ChunkEntropy", "characterLength", "ENTROPY_CONSTANTS", "calculateDictionaryEntropy", "dictionarySize", "wordCount", "bitsPerWord", "getSecurityLevel", "entropyBits", "getSecurityRecommendation", "calculateTotalEntropy", "config", "type", "length", "iteration", "dictionarySize", "calculateBase64ChunkEntropy", "calculateDictionaryEntropy", "createService", "config", "ports", "validateOnInit", "resolvedPorts", "NoOpLogger", "MemoryStorage", "FixedClock", "MemoryDictionary", "DEFAULT_WORD_LIST", "validation", "validatePorts", "options", "type", "length", "iteration", "separator", "PASSWORD_ERRORS", "isValidPasswordType", "VALID_PASSWORD_TYPES", "validatePasswordTypeConfig", "generate", "optionsArray", "results", "password", "totalEntropy", "calculateTotalEntropy", "securityLevel", "getSecurityLevel", "recommendation", "getSecurityRecommendation", "GENERATOR_REGISTRY", "BrowserCryptoRandom", "RandomGeneratorPort", "byteLength", "bytes", "max", "bytesNeeded", "maxValue", "randomValue", "randomBytes", "acc", "byte", "binaryString", "length", "charset", "result", "i", "index", "BrowserStorage", "StoragePort", "options", "key", "testKey", "content", "error", "existed", "keysToRemove", "i", "BrowserClock", "ClockPort", "asyncFn", "start", "result", "elapsed", "ms", "resolve", "FormState", "_FormState", "data", "presetName", "presets", "preset", "updates", "other", "StateToCoreMapper", "formState", "config", "parsed", "FormState", "PasswordViewModel", "_PasswordViewModel", "data", "password", "entropyInfo", "bits", "config", "parts", "result", "showPassword", "filled", "empty", "ValidationViewModel", "_ValidationViewModel", "data", "validation", "formState", "fieldErrors", "error", "lowerError", "fieldName", "field", "EntropyViewModel", "_EntropyViewModel", "entropyInfo", "bits", "WebUIController", "options", "createService", "BrowserCryptoRandom", "BrowserStorage", "BrowserClock", "StateToCoreMapper", "formState", "config", "validation", "ValidationViewModel", "password", "entropyInfo", "PasswordViewModel", "EntropyViewModel", "createWebUIController", "PRESETS", "controller", "currentPassword", "isPasswordVisible", "elements", "initElements", "getFormState", "selectedType", "FormState", "updateUIForType", "type", "isMemorableType", "isQuantumType", "iterationGroup", "separatorGroup", "iterationHint", "applyPreset", "presetName", "preset", "typeInput", "btn", "showToast", "message", "setLoading", "isLoading", "showError", "escapeHtml", "text", "div", "displayPassword", "result", "updatePasswordDisplay", "updateStrengthIndicator", "announceToScreenReader", "masked", "strengthIndicator", "entropyBits", "roundedBits", "dot", "index", "announcement", "copyToClipboard", "textarea", "generatePassword", "formState", "error", "setupEventListeners", "e", "input", "selection", "init", "initTheme", "createWebUIController"]
}
